(module
  (type (;0;) (func (param v128) (result i32)))
  (type (;1;) (func (param v128) (result f32)))
  (type (;2;) (func (param v128 i32) (result v128)))
  (type (;3;) (func (param v128 f32) (result v128)))
  (type (;4;) (func (param v128) (result i64)))
  (type (;5;) (func (param v128) (result f64)))
  (type (;6;) (func (param v128 i64) (result v128)))
  (type (;7;) (func (param v128 f64) (result v128)))
  (type (;8;) (func (param v128 v128) (result v128)))
  (type (;9;) (func (param i64)))
  (type (;10;) (func (param i64 i64)))
  (import "spectest" "finite_wasm_gas" (func (;0;) (type 9)))
  (import "spectest" "finite_wasm_stack" (func (;1;) (type 10)))
  (import "spectest" "finite_wasm_unstack" (func (;2;) (type 10)))
  (func (;3;) (type 0) (param v128) (result i32)
    block (result i32) ;; label = @1
      i64.const 16
      i64.const 1
      call 1
      i64.const 0
      call 0
      i64.const 2
      call 0
      local.get 0
      i8x16.extract_lane_s 0
    end
    i64.const 16
    i64.const 1
    call 2
  )
  (func (;4;) (type 0) (param v128) (result i32)
    block (result i32) ;; label = @1
      i64.const 16
      i64.const 1
      call 1
      i64.const 0
      call 0
      i64.const 2
      call 0
      local.get 0
      i8x16.extract_lane_s 15
    end
    i64.const 16
    i64.const 1
    call 2
  )
  (func (;5;) (type 0) (param v128) (result i32)
    block (result i32) ;; label = @1
      i64.const 16
      i64.const 1
      call 1
      i64.const 0
      call 0
      i64.const 2
      call 0
      local.get 0
      i8x16.extract_lane_u 0
    end
    i64.const 16
    i64.const 1
    call 2
  )
  (func (;6;) (type 0) (param v128) (result i32)
    block (result i32) ;; label = @1
      i64.const 16
      i64.const 1
      call 1
      i64.const 0
      call 0
      i64.const 2
      call 0
      local.get 0
      i8x16.extract_lane_u 15
    end
    i64.const 16
    i64.const 1
    call 2
  )
  (func (;7;) (type 0) (param v128) (result i32)
    block (result i32) ;; label = @1
      i64.const 16
      i64.const 1
      call 1
      i64.const 0
      call 0
      i64.const 2
      call 0
      local.get 0
      i16x8.extract_lane_s 0
    end
    i64.const 16
    i64.const 1
    call 2
  )
  (func (;8;) (type 0) (param v128) (result i32)
    block (result i32) ;; label = @1
      i64.const 16
      i64.const 1
      call 1
      i64.const 0
      call 0
      i64.const 2
      call 0
      local.get 0
      i16x8.extract_lane_s 7
    end
    i64.const 16
    i64.const 1
    call 2
  )
  (func (;9;) (type 0) (param v128) (result i32)
    block (result i32) ;; label = @1
      i64.const 16
      i64.const 1
      call 1
      i64.const 0
      call 0
      i64.const 2
      call 0
      local.get 0
      i16x8.extract_lane_u 0
    end
    i64.const 16
    i64.const 1
    call 2
  )
  (func (;10;) (type 0) (param v128) (result i32)
    block (result i32) ;; label = @1
      i64.const 16
      i64.const 1
      call 1
      i64.const 0
      call 0
      i64.const 2
      call 0
      local.get 0
      i16x8.extract_lane_u 7
    end
    i64.const 16
    i64.const 1
    call 2
  )
  (func (;11;) (type 0) (param v128) (result i32)
    block (result i32) ;; label = @1
      i64.const 16
      i64.const 1
      call 1
      i64.const 0
      call 0
      i64.const 2
      call 0
      local.get 0
      i32x4.extract_lane 0
    end
    i64.const 16
    i64.const 1
    call 2
  )
  (func (;12;) (type 0) (param v128) (result i32)
    block (result i32) ;; label = @1
      i64.const 16
      i64.const 1
      call 1
      i64.const 0
      call 0
      i64.const 2
      call 0
      local.get 0
      i32x4.extract_lane 3
    end
    i64.const 16
    i64.const 1
    call 2
  )
  (func (;13;) (type 1) (param v128) (result f32)
    block (result f32) ;; label = @1
      i64.const 16
      i64.const 1
      call 1
      i64.const 0
      call 0
      i64.const 2
      call 0
      local.get 0
      f32x4.extract_lane 0
    end
    i64.const 16
    i64.const 1
    call 2
  )
  (func (;14;) (type 1) (param v128) (result f32)
    block (result f32) ;; label = @1
      i64.const 16
      i64.const 1
      call 1
      i64.const 0
      call 0
      i64.const 2
      call 0
      local.get 0
      f32x4.extract_lane 3
    end
    i64.const 16
    i64.const 1
    call 2
  )
  (func (;15;) (type 2) (param v128 i32) (result v128)
    block (result v128) ;; label = @1
      i64.const 20
      i64.const 2
      call 1
      i64.const 0
      call 0
      i64.const 3
      call 0
      local.get 0
      local.get 1
      i8x16.replace_lane 0
    end
    i64.const 20
    i64.const 2
    call 2
  )
  (func (;16;) (type 2) (param v128 i32) (result v128)
    block (result v128) ;; label = @1
      i64.const 20
      i64.const 2
      call 1
      i64.const 0
      call 0
      i64.const 3
      call 0
      local.get 0
      local.get 1
      i8x16.replace_lane 15
    end
    i64.const 20
    i64.const 2
    call 2
  )
  (func (;17;) (type 2) (param v128 i32) (result v128)
    block (result v128) ;; label = @1
      i64.const 20
      i64.const 2
      call 1
      i64.const 0
      call 0
      i64.const 3
      call 0
      local.get 0
      local.get 1
      i16x8.replace_lane 0
    end
    i64.const 20
    i64.const 2
    call 2
  )
  (func (;18;) (type 2) (param v128 i32) (result v128)
    block (result v128) ;; label = @1
      i64.const 20
      i64.const 2
      call 1
      i64.const 0
      call 0
      i64.const 3
      call 0
      local.get 0
      local.get 1
      i16x8.replace_lane 7
    end
    i64.const 20
    i64.const 2
    call 2
  )
  (func (;19;) (type 2) (param v128 i32) (result v128)
    block (result v128) ;; label = @1
      i64.const 20
      i64.const 2
      call 1
      i64.const 0
      call 0
      i64.const 3
      call 0
      local.get 0
      local.get 1
      i32x4.replace_lane 0
    end
    i64.const 20
    i64.const 2
    call 2
  )
  (func (;20;) (type 2) (param v128 i32) (result v128)
    block (result v128) ;; label = @1
      i64.const 20
      i64.const 2
      call 1
      i64.const 0
      call 0
      i64.const 3
      call 0
      local.get 0
      local.get 1
      i32x4.replace_lane 3
    end
    i64.const 20
    i64.const 2
    call 2
  )
  (func (;21;) (type 3) (param v128 f32) (result v128)
    block (result v128) ;; label = @1
      i64.const 20
      i64.const 2
      call 1
      i64.const 0
      call 0
      i64.const 3
      call 0
      local.get 0
      local.get 1
      f32x4.replace_lane 0
    end
    i64.const 20
    i64.const 2
    call 2
  )
  (func (;22;) (type 3) (param v128 f32) (result v128)
    block (result v128) ;; label = @1
      i64.const 20
      i64.const 2
      call 1
      i64.const 0
      call 0
      i64.const 3
      call 0
      local.get 0
      local.get 1
      f32x4.replace_lane 3
    end
    i64.const 20
    i64.const 2
    call 2
  )
  (func (;23;) (type 4) (param v128) (result i64)
    block (result i64) ;; label = @1
      i64.const 16
      i64.const 1
      call 1
      i64.const 0
      call 0
      i64.const 2
      call 0
      local.get 0
      i64x2.extract_lane 0
    end
    i64.const 16
    i64.const 1
    call 2
  )
  (func (;24;) (type 4) (param v128) (result i64)
    block (result i64) ;; label = @1
      i64.const 16
      i64.const 1
      call 1
      i64.const 0
      call 0
      i64.const 2
      call 0
      local.get 0
      i64x2.extract_lane 1
    end
    i64.const 16
    i64.const 1
    call 2
  )
  (func (;25;) (type 5) (param v128) (result f64)
    block (result f64) ;; label = @1
      i64.const 16
      i64.const 1
      call 1
      i64.const 0
      call 0
      i64.const 2
      call 0
      local.get 0
      f64x2.extract_lane 0
    end
    i64.const 16
    i64.const 1
    call 2
  )
  (func (;26;) (type 5) (param v128) (result f64)
    block (result f64) ;; label = @1
      i64.const 16
      i64.const 1
      call 1
      i64.const 0
      call 0
      i64.const 2
      call 0
      local.get 0
      f64x2.extract_lane 1
    end
    i64.const 16
    i64.const 1
    call 2
  )
  (func (;27;) (type 6) (param v128 i64) (result v128)
    block (result v128) ;; label = @1
      i64.const 24
      i64.const 2
      call 1
      i64.const 0
      call 0
      i64.const 3
      call 0
      local.get 0
      local.get 1
      i64x2.replace_lane 0
    end
    i64.const 24
    i64.const 2
    call 2
  )
  (func (;28;) (type 6) (param v128 i64) (result v128)
    block (result v128) ;; label = @1
      i64.const 24
      i64.const 2
      call 1
      i64.const 0
      call 0
      i64.const 3
      call 0
      local.get 0
      local.get 1
      i64x2.replace_lane 1
    end
    i64.const 24
    i64.const 2
    call 2
  )
  (func (;29;) (type 7) (param v128 f64) (result v128)
    block (result v128) ;; label = @1
      i64.const 24
      i64.const 2
      call 1
      i64.const 0
      call 0
      i64.const 3
      call 0
      local.get 0
      local.get 1
      f64x2.replace_lane 0
    end
    i64.const 24
    i64.const 2
    call 2
  )
  (func (;30;) (type 7) (param v128 f64) (result v128)
    block (result v128) ;; label = @1
      i64.const 24
      i64.const 2
      call 1
      i64.const 0
      call 0
      i64.const 3
      call 0
      local.get 0
      local.get 1
      f64x2.replace_lane 1
    end
    i64.const 24
    i64.const 2
    call 2
  )
  (func (;31;) (type 8) (param v128 v128) (result v128)
    block (result v128) ;; label = @1
      i64.const 32
      i64.const 2
      call 1
      i64.const 0
      call 0
      i64.const 3
      call 0
      local.get 0
      local.get 1
      i8x16.swizzle
    end
    i64.const 32
    i64.const 2
    call 2
  )
  (func (;32;) (type 8) (param v128 v128) (result v128)
    block (result v128) ;; label = @1
      i64.const 32
      i64.const 2
      call 1
      i64.const 0
      call 0
      i64.const 3
      call 0
      local.get 0
      local.get 1
      i8x16.shuffle 0 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15
    end
    i64.const 32
    i64.const 2
    call 2
  )
  (func (;33;) (type 8) (param v128 v128) (result v128)
    block (result v128) ;; label = @1
      i64.const 32
      i64.const 2
      call 1
      i64.const 0
      call 0
      i64.const 3
      call 0
      local.get 0
      local.get 1
      i8x16.shuffle 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31
    end
    i64.const 32
    i64.const 2
    call 2
  )
  (func (;34;) (type 8) (param v128 v128) (result v128)
    block (result v128) ;; label = @1
      i64.const 32
      i64.const 2
      call 1
      i64.const 0
      call 0
      i64.const 3
      call 0
      local.get 0
      local.get 1
      i8x16.shuffle 31 30 29 28 27 26 25 24 23 22 21 20 19 18 17 16
    end
    i64.const 32
    i64.const 2
    call 2
  )
  (func (;35;) (type 8) (param v128 v128) (result v128)
    block (result v128) ;; label = @1
      i64.const 32
      i64.const 2
      call 1
      i64.const 0
      call 0
      i64.const 3
      call 0
      local.get 0
      local.get 1
      i8x16.shuffle 15 14 13 12 11 10 9 8 7 6 5 4 3 2 1 0
    end
    i64.const 32
    i64.const 2
    call 2
  )
  (func (;36;) (type 8) (param v128 v128) (result v128)
    block (result v128) ;; label = @1
      i64.const 32
      i64.const 2
      call 1
      i64.const 0
      call 0
      i64.const 3
      call 0
      local.get 0
      local.get 1
      i8x16.shuffle 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0
    end
    i64.const 32
    i64.const 2
    call 2
  )
  (func (;37;) (type 8) (param v128 v128) (result v128)
    block (result v128) ;; label = @1
      i64.const 32
      i64.const 2
      call 1
      i64.const 0
      call 0
      i64.const 3
      call 0
      local.get 0
      local.get 1
      i8x16.shuffle 16 16 16 16 16 16 16 16 16 16 16 16 16 16 16 16
    end
    i64.const 32
    i64.const 2
    call 2
  )
  (func (;38;) (type 8) (param v128 v128) (result v128)
    block (result v128) ;; label = @1
      i64.const 32
      i64.const 2
      call 1
      i64.const 0
      call 0
      i64.const 3
      call 0
      local.get 0
      local.get 1
      i8x16.shuffle 0 0 0 0 0 0 0 0 16 16 16 16 16 16 16 16
    end
    i64.const 32
    i64.const 2
    call 2
  )
  (export "i8x16_extract_lane_s-first" (func 3))
  (export "i8x16_extract_lane_s-last" (func 4))
  (export "i8x16_extract_lane_u-first" (func 5))
  (export "i8x16_extract_lane_u-last" (func 6))
  (export "i16x8_extract_lane_s-first" (func 7))
  (export "i16x8_extract_lane_s-last" (func 8))
  (export "i16x8_extract_lane_u-first" (func 9))
  (export "i16x8_extract_lane_u-last" (func 10))
  (export "i32x4_extract_lane-first" (func 11))
  (export "i32x4_extract_lane-last" (func 12))
  (export "f32x4_extract_lane-first" (func 13))
  (export "f32x4_extract_lane-last" (func 14))
  (export "i8x16_replace_lane-first" (func 15))
  (export "i8x16_replace_lane-last" (func 16))
  (export "i16x8_replace_lane-first" (func 17))
  (export "i16x8_replace_lane-last" (func 18))
  (export "i32x4_replace_lane-first" (func 19))
  (export "i32x4_replace_lane-last" (func 20))
  (export "f32x4_replace_lane-first" (func 21))
  (export "f32x4_replace_lane-last" (func 22))
  (export "i64x2_extract_lane-first" (func 23))
  (export "i64x2_extract_lane-last" (func 24))
  (export "f64x2_extract_lane-first" (func 25))
  (export "f64x2_extract_lane-last" (func 26))
  (export "i64x2_replace_lane-first" (func 27))
  (export "i64x2_replace_lane-last" (func 28))
  (export "f64x2_replace_lane-first" (func 29))
  (export "f64x2_replace_lane-last" (func 30))
  (export "v8x16_swizzle" (func 31))
  (export "v8x16_shuffle-1" (func 32))
  (export "v8x16_shuffle-2" (func 33))
  (export "v8x16_shuffle-3" (func 34))
  (export "v8x16_shuffle-4" (func 35))
  (export "v8x16_shuffle-5" (func 36))
  (export "v8x16_shuffle-6" (func 37))
  (export "v8x16_shuffle-7" (func 38))
)
(assert_return (invoke "i8x16_extract_lane_s-first" (v128.const i8x16 127 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0)) (i32.const 127))
(assert_return (invoke "i8x16_extract_lane_s-first" (v128.const i8x16 0x7f 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0)) (i32.const 127))
(assert_return (invoke "i8x16_extract_lane_s-first" (v128.const i8x16 255 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0)) (i32.const -1))
(assert_return (invoke "i8x16_extract_lane_s-first" (v128.const i8x16 0xff 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0)) (i32.const -1))
(assert_return (invoke "i8x16_extract_lane_u-first" (v128.const i8x16 255 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0)) (i32.const 255))
(assert_return (invoke "i8x16_extract_lane_u-first" (v128.const i8x16 0xff 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0)) (i32.const 255))
(assert_return (invoke "i8x16_extract_lane_s-last" (v128.const i8x16 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 -128)) (i32.const -128))
(assert_return (invoke "i8x16_extract_lane_s-last" (v128.const i8x16 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0x80)) (i32.const -128))
(assert_return (invoke "i8x16_extract_lane_u-last" (v128.const i8x16 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 -1)) (i32.const 255))
(assert_return (invoke "i8x16_extract_lane_u-last" (v128.const i8x16 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0xff)) (i32.const 255))
(assert_return (invoke "i8x16_extract_lane_u-last" (v128.const i8x16 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 -128)) (i32.const 128))
(assert_return (invoke "i8x16_extract_lane_u-last" (v128.const i8x16 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0x80)) (i32.const 128))

(assert_return (invoke "i16x8_extract_lane_s-first" (v128.const i16x8 32767 0 0 0 0 0 0 0)) (i32.const 32767))
(assert_return (invoke "i16x8_extract_lane_s-first" (v128.const i16x8 0x7fff 0 0 0 0 0 0 0)) (i32.const 32767))
(assert_return (invoke "i16x8_extract_lane_s-first" (v128.const i16x8 65535 0 0 0 0 0 0 0)) (i32.const -1))
(assert_return (invoke "i16x8_extract_lane_s-first" (v128.const i16x8 0xffff 0 0 0 0 0 0 0)) (i32.const -1))
(assert_return (invoke "i16x8_extract_lane_s-first" (v128.const i16x8 012_345 0 0 0 0 0 0 0)) (i32.const 12345))
(assert_return (invoke "i16x8_extract_lane_s-first" (v128.const i16x8 -0x0_1234 0 0 0 0 0 0 0)) (i32.const -0x1234))
(assert_return (invoke "i16x8_extract_lane_u-first" (v128.const i16x8 65535 0 0 0 0 0 0 0)) (i32.const 65535))
(assert_return (invoke "i16x8_extract_lane_u-first" (v128.const i16x8 0xffff 0 0 0 0 0 0 0)) (i32.const 65535))
(assert_return (invoke "i16x8_extract_lane_u-first" (v128.const i16x8 012_345 0 0 0 0 0 0 0)) (i32.const 12345))
(assert_return (invoke "i16x8_extract_lane_u-first" (v128.const i16x8 -0x0_1234 0 0 0 0 0 0 0)) (i32.const 60876))
(assert_return (invoke "i16x8_extract_lane_s-last" (v128.const i16x8 0 0 0 0 0 0 0 -32768)) (i32.const -32768))
(assert_return (invoke "i16x8_extract_lane_s-last" (v128.const i16x8 0 0 0 0 0 0 0 0x8000)) (i32.const -32768))
(assert_return (invoke "i16x8_extract_lane_s-last" (v128.const i16x8 0 0 0 0 0 0 0 06_789)) (i32.const 6789))
(assert_return (invoke "i16x8_extract_lane_s-last" (v128.const i16x8 0 0 0 0 0 0 0 -0x0_6789)) (i32.const -0x6789))
(assert_return (invoke "i16x8_extract_lane_u-last" (v128.const i16x8 0 0 0 0 0 0 0 -1)) (i32.const 65535))
(assert_return (invoke "i16x8_extract_lane_u-last" (v128.const i16x8 0 0 0 0 0 0 0 0xffff)) (i32.const 65535))
(assert_return (invoke "i16x8_extract_lane_u-last" (v128.const i16x8 0 0 0 0 0 0 0 -32768)) (i32.const 32768))
(assert_return (invoke "i16x8_extract_lane_u-last" (v128.const i16x8 0 0 0 0 0 0 0 0x8000)) (i32.const 32768))
(assert_return (invoke "i16x8_extract_lane_u-last" (v128.const i16x8 0 0 0 0 0 0 0 06_789)) (i32.const 6789))
(assert_return (invoke "i16x8_extract_lane_u-last" (v128.const i16x8 0 0 0 0 0 0 0 -0x0_6789)) (i32.const 39031))

(assert_return (invoke "i32x4_extract_lane-first" (v128.const i32x4 2147483647 0 0 0)) (i32.const 2147483647))
(assert_return (invoke "i32x4_extract_lane-first" (v128.const i32x4 0x7fffffff 0 0 0)) (i32.const 2147483647))
(assert_return (invoke "i32x4_extract_lane-first" (v128.const i32x4 4294967295 0 0 0)) (i32.const -1))
(assert_return (invoke "i32x4_extract_lane-first" (v128.const i32x4 0xffffffff 0 0 0)) (i32.const -1))
(assert_return (invoke "i32x4_extract_lane-first" (v128.const i32x4 01_234_567_890 0 0 0)) (i32.const 1234567890))
(assert_return (invoke "i32x4_extract_lane-first" (v128.const i32x4 -0x0_1234_5678 0 0 0)) (i32.const -0x12345678))
(assert_return (invoke "i32x4_extract_lane-last" (v128.const i32x4 0 0 0 -2147483648)) (i32.const -2147483648))
(assert_return (invoke "i32x4_extract_lane-last" (v128.const i32x4 0 0 0 0x80000000)) (i32.const -2147483648))
(assert_return (invoke "i32x4_extract_lane-last" (v128.const i32x4 0 0 0 -1)) (i32.const -1))
(assert_return (invoke "i32x4_extract_lane-last" (v128.const i32x4 0 0 0 0xffffffff)) (i32.const -1))
(assert_return (invoke "i32x4_extract_lane-last" (v128.const i32x4 0 0 0 0_987_654_321)) (i32.const 987654321))
(assert_return (invoke "i32x4_extract_lane-last" (v128.const i32x4 0 0 0 -0x0_1234_5678)) (i32.const -0x12345678))

(assert_return (invoke "i64x2_extract_lane-first" (v128.const i64x2 9223372036854775807 0)) (i64.const 9223372036854775807))
(assert_return (invoke "i64x2_extract_lane-first" (v128.const i64x2 0x7ffffffffffffffe 0)) (i64.const 0x7ffffffffffffffe))
(assert_return (invoke "i64x2_extract_lane-first" (v128.const i64x2 18446744073709551615 0)) (i64.const -1))
(assert_return (invoke "i64x2_extract_lane-first" (v128.const i64x2 0xffffffffffffffff 0)) (i64.const -1))
(assert_return (invoke "i64x2_extract_lane-first" (v128.const i64x2 01_234_567_890_123_456_789 0)) (i64.const 1234567890123456789))
(assert_return (invoke "i64x2_extract_lane-first" (v128.const i64x2 0x0_1234_5678_90AB_cdef 0)) (i64.const 0x1234567890abcdef))
(assert_return (invoke "i64x2_extract_lane-last" (v128.const i64x2 0 9223372036854775808)) (i64.const -9223372036854775808))
(assert_return (invoke "i64x2_extract_lane-last" (v128.const i64x2 0 0x8000000000000000)) (i64.const -0x8000000000000000))
(assert_return (invoke "i64x2_extract_lane-last" (v128.const i64x2 0 0x8000000000000000)) (i64.const 0x8000000000000000))
(assert_return (invoke "i64x2_extract_lane-last" (v128.const i8x16 0 0 0 0 0 0 0 0 0xff 0xff 0xff 0xff 0xff 0xff 0xff 0x7f)) (i64.const 9223372036854775807))
(assert_return (invoke "i64x2_extract_lane-last" (v128.const i16x8 0 0 0 0 0 0 0 0x8000)) (i64.const -9223372036854775808))
(assert_return (invoke "i64x2_extract_lane-last" (v128.const i32x4 0 0 0xffffffff 0x7fffffff)) (i64.const 9223372036854775807))
(assert_return (invoke "i64x2_extract_lane-last" (v128.const f64x2 -inf +inf)) (i64.const 0x7ff0000000000000))
(assert_return (invoke "i64x2_extract_lane-last" (v128.const i64x2 0 01_234_567_890_123_456_789)) (i64.const 1234567890123456789))
(assert_return (invoke "i64x2_extract_lane-last" (v128.const i64x2 0 0x0_1234_5678_90AB_cdef)) (i64.const 0x1234567890abcdef))

(assert_return (invoke "f32x4_extract_lane-first" (v128.const f32x4 -5.0 0.0 0.0 0.0)) (f32.const -5.0))
(assert_return (invoke "f32x4_extract_lane-first" (v128.const f32x4 1e38 0.0 0.0 0.0)) (f32.const 1e38))
(assert_return (invoke "f32x4_extract_lane-first" (v128.const f32x4 0x1.fffffep127 0.0 0.0 0.0)) (f32.const 0x1.fffffep127))
(assert_return (invoke "f32x4_extract_lane-first" (v128.const f32x4 0x1p127 0.0 0.0 0.0)) (f32.const 0x1p127))
(assert_return (invoke "f32x4_extract_lane-first" (v128.const f32x4 inf 0.0 0.0 0.0)) (f32.const inf))
(assert_return (invoke "f32x4_extract_lane-first" (v128.const f32x4 nan inf 0.0 0.0)) (f32.const nan))
(assert_return (invoke "f32x4_extract_lane-first" (v128.const f32x4 0123456789.0123456789e+019 0.0 0.0 0.0)) (f32.const 123456789.0123456789e+019))
(assert_return (invoke "f32x4_extract_lane-first" (v128.const f32x4 0x0123456789ABCDEF.019aFp-019 0.0 0.0 0.0)) (f32.const 0x123456789ABCDEF.019aFp-019))
(assert_return (invoke "f32x4_extract_lane-last" (v128.const f32x4 0.0 0.0 0.0 -1e38)) (f32.const -1e38))
(assert_return (invoke "f32x4_extract_lane-last" (v128.const f32x4 0.0 0.0 0.0 -0x1.fffffep127)) (f32.const -0x1.fffffep127))
(assert_return (invoke "f32x4_extract_lane-last" (v128.const f32x4 0.0 0.0 0.0 -0x1p127)) (f32.const -0x1p127))
(assert_return (invoke "f32x4_extract_lane-last" (v128.const f32x4 0.0 0.0 0.0 -inf)) (f32.const -inf))
(assert_return (invoke "f32x4_extract_lane-last" (v128.const f32x4 0.0 0.0 -inf nan)) (f32.const nan))
(assert_return (invoke "f32x4_extract_lane-last" (v128.const f32x4 0.0 0.0 0.0 0123456789.)) (f32.const 123456789.0))
(assert_return (invoke "f32x4_extract_lane-last" (v128.const f32x4 0.0 0.0 0.0 0x0123456789ABCDEF.)) (f32.const 0x123456789ABCDEF.0p0))

(assert_return (invoke "f64x2_extract_lane-first" (v128.const f64x2 -1.5 0.0)) (f64.const -1.5))
(assert_return (invoke "f64x2_extract_lane-first" (v128.const f64x2 1.5 0.0)) (f64.const 1.5))
(assert_return (invoke "f64x2_extract_lane-first" (v128.const f64x2 -1.7976931348623157e-308 0x0p+0)) (f64.const -1.7976931348623157e-308))
(assert_return (invoke "f64x2_extract_lane-first" (v128.const f64x2 1.7976931348623157e-308 0x0p-0)) (f64.const 1.7976931348623157e-308))
(assert_return (invoke "f64x2_extract_lane-first" (v128.const f64x2 -0x1.fffffffffffffp-1023 0x0p+0)) (f64.const -0x1.fffffffffffffp-1023))
(assert_return (invoke "f64x2_extract_lane-first" (v128.const f64x2 0x1.fffffffffffffp-1023 0x0p-0)) (f64.const 0x1.fffffffffffffp-1023))
(assert_return (invoke "f64x2_extract_lane-first" (v128.const f64x2 -inf 0.0)) (f64.const -inf))
(assert_return (invoke "f64x2_extract_lane-first" (v128.const f64x2 inf 0.0)) (f64.const inf))
(assert_return (invoke "f64x2_extract_lane-first" (v128.const f64x2 -nan -0.0)) (f64.const -nan))
(assert_return (invoke "f64x2_extract_lane-first" (v128.const f64x2 nan 0.0)) (f64.const nan))
(assert_return (invoke "f64x2_extract_lane-first" (v128.const f64x2 0123456789.0123456789e+019 0.0)) (f64.const 123456789.0123456789e+019))
(assert_return (invoke "f64x2_extract_lane-first" (v128.const f64x2 0x0123456789ABCDEFabcdef.0123456789ABCDEFabcdefp-019 0.0)) (f64.const 0x123456789ABCDEFabcdef.0123456789ABCDEFabcdefp-019))
(assert_return (invoke "f64x2_extract_lane-last" (v128.const f64x2 0.0 2.25)) (f64.const 2.25))
(assert_return (invoke "f64x2_extract_lane-last" (v128.const f64x2 0.0 -2.25)) (f64.const -2.25))
(assert_return (invoke "f64x2_extract_lane-last" (v128.const f64x2 0x0p-0 -1.7976931348623157e+308)) (f64.const -1.7976931348623157e+308))
(assert_return (invoke "f64x2_extract_lane-last" (v128.const f64x2 0x0p+0 1.7976931348623157e+308)) (f64.const 1.7976931348623157e+308))
(assert_return (invoke "f64x2_extract_lane-last" (v128.const f64x2 0x0p-0 -0x1.fffffffffffffp+1023)) (f64.const -0x1.fffffffffffffp+1023))
(assert_return (invoke "f64x2_extract_lane-last" (v128.const f64x2 0x0p+0 0x1.fffffffffffffp+1023)) (f64.const 0x1.fffffffffffffp+1023))
(assert_return (invoke "f64x2_extract_lane-last" (v128.const f64x2 -0.0 -inf)) (f64.const -inf))
(assert_return (invoke "f64x2_extract_lane-last" (v128.const f64x2 0.0 inf)) (f64.const inf))
(assert_return (invoke "f64x2_extract_lane-last" (v128.const f64x2 -0.0 -nan)) (f64.const -nan))
(assert_return (invoke "f64x2_extract_lane-last" (v128.const f64x2 0.0 nan)) (f64.const nan))
(assert_return (invoke "f64x2_extract_lane-last" (v128.const f64x2 0.0 0123456789.)) (f64.const 123456789.0))
(assert_return (invoke "f64x2_extract_lane-last" (v128.const f64x2 0.0 0x0123456789ABCDEFabcdef.)) (f64.const 0x123456789ABCDEFabcdef.0))

(assert_return (invoke "f64x2_extract_lane-last" (v128.const i8x16 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0)) (f64.const 0.0))
(assert_return (invoke "f64x2_extract_lane-last" (v128.const i8x16 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0x80)) (f64.const -0.0))
(assert_return (invoke "f64x2_extract_lane-last" (v128.const i16x8 0 0 0 0 0 0 0 0x4000)) (f64.const 2.0))
(assert_return (invoke "f64x2_extract_lane-last" (v128.const i16x8 0 0 0 0 0 0 0 0xc000)) (f64.const -2.0))
(assert_return (invoke "f64x2_extract_lane-last" (v128.const i32x4 0 0 0xffffffff 0x7fefffff)) (f64.const 0x1.fffffffffffffp+1023))
(assert_return (invoke "f64x2_extract_lane-last" (v128.const i32x4 0 0 0 0x00100000)) (f64.const 0x1.0000000000000p-1022))
(assert_return (invoke "f64x2_extract_lane-last" (v128.const i32x4 0 0 0xffffffff 0x000fffff)) (f64.const 0x1.ffffffffffffep-1023))
(assert_return (invoke "f64x2_extract_lane-last" (v128.const i32x4 0 0 1 0)) (f64.const 0x0.0000000000002p-1023))

(assert_return (invoke "i8x16_replace_lane-first" (v128.const i8x16 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0) (i32.const 127)) (v128.const i8x16 127 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0))
(assert_return (invoke "i8x16_replace_lane-first" (v128.const i8x16 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0) (i32.const 128)) (v128.const i8x16 -128 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0))
(assert_return (invoke "i8x16_replace_lane-first" (v128.const i8x16 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0) (i32.const 255)) (v128.const i8x16 -1 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0))
(assert_return (invoke "i8x16_replace_lane-first" (v128.const i8x16 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0) (i32.const 256)) (v128.const i8x16 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0))
(assert_return (invoke "i8x16_replace_lane-last" (v128.const i8x16 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0) (i32.const -128)) (v128.const i8x16 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 -128))
(assert_return (invoke "i8x16_replace_lane-last" (v128.const i8x16 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0) (i32.const -129)) (v128.const i8x16 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 127))
(assert_return (invoke "i8x16_replace_lane-last" (v128.const i8x16 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0) (i32.const 32767)) (v128.const i8x16 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0xff))
(assert_return (invoke "i8x16_replace_lane-last" (v128.const i8x16 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0) (i32.const -32768)) (v128.const i8x16 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0))

(assert_return (invoke "i16x8_replace_lane-first" (v128.const i16x8 0 0 0 0 0 0 0 0) (i32.const 32767)) (v128.const i16x8 32767 0 0 0 0 0 0 0))
(assert_return (invoke "i16x8_replace_lane-first" (v128.const i16x8 0 0 0 0 0 0 0 0) (i32.const 32768)) (v128.const i16x8 -32768 0 0 0 0 0 0 0))
(assert_return (invoke "i16x8_replace_lane-first" (v128.const i16x8 0 0 0 0 0 0 0 0) (i32.const 65535)) (v128.const i16x8 -1 0 0 0 0 0 0 0))
(assert_return (invoke "i16x8_replace_lane-first" (v128.const i16x8 0 0 0 0 0 0 0 0) (i32.const 65536)) (v128.const i16x8 0 0 0 0 0 0 0 0))
(assert_return (invoke "i16x8_replace_lane-first" (v128.const i16x8 0 0 0 0 0 0 0 0) (i32.const 012345)) (v128.const i16x8 012_345 0 0 0 0 0 0 0))
(assert_return (invoke "i16x8_replace_lane-first" (v128.const i16x8 0 0 0 0 0 0 0 0) (i32.const -0x01234)) (v128.const i16x8 -0x0_1234 0 0 0 0 0 0 0))
(assert_return (invoke "i16x8_replace_lane-last" (v128.const i16x8 0 0 0 0 0 0 0 0) (i32.const -32768)) (v128.const i16x8 0 0 0 0 0 0 0 -32768))
(assert_return (invoke "i16x8_replace_lane-last" (v128.const i16x8 0 0 0 0 0 0 0 0) (i32.const -32769)) (v128.const i16x8 0 0 0 0 0 0 0 32767))
(assert_return (invoke "i16x8_replace_lane-last" (v128.const i16x8 0 0 0 0 0 0 0 0) (i32.const 0x7fffffff)) (v128.const i16x8 0 0 0 0 0 0 0 0xffff))
(assert_return (invoke "i16x8_replace_lane-last" (v128.const i16x8 0 0 0 0 0 0 0 0) (i32.const 0x80000000)) (v128.const i16x8 0 0 0 0 0 0 0 0))
(assert_return (invoke "i16x8_replace_lane-last" (v128.const i16x8 0 0 0 0 0 0 0 0) (i32.const 054321)) (v128.const i16x8 0 0 0 0 0 0 0 054_321))
(assert_return (invoke "i16x8_replace_lane-last" (v128.const i16x8 0 0 0 0 0 0 0 0) (i32.const -0x04321)) (v128.const i16x8 0 0 0 0 0 0 0 -0x0_4321))

(assert_return (invoke "i32x4_replace_lane-first" (v128.const i32x4 0 0 0 0) (i32.const 2147483647)) (v128.const i32x4 2147483647 0 0 0))
(assert_return (invoke "i32x4_replace_lane-first" (v128.const i32x4 0 0 0 0) (i32.const 4294967295)) (v128.const i32x4 -1 0 0 0))
(assert_return (invoke "i32x4_replace_lane-first" (v128.const i32x4 0 0 0 0) (i32.const 01234567890)) (v128.const i32x4 01_234_567_890 0 0 0))
(assert_return (invoke "i32x4_replace_lane-first" (v128.const i32x4 0 0 0 0) (i32.const -0x012345678)) (v128.const i32x4 -0x0_1234_5678 0 0 0))
(assert_return (invoke "i32x4_replace_lane-last" (v128.const i32x4 0 0 0 0) (i32.const 2147483648)) (v128.const i32x4 0 0 0 2147483648))
(assert_return (invoke "i32x4_replace_lane-last" (v128.const i32x4 0 0 0 0) (i32.const -2147483648)) (v128.const i32x4 0 0 0 -2147483648))
(assert_return (invoke "i32x4_replace_lane-last" (v128.const i32x4 0 0 0 0) (i32.const 01234567890)) (v128.const i32x4 0 0 0 01_234_567_890))
(assert_return (invoke "i32x4_replace_lane-last" (v128.const i32x4 0 0 0 0) (i32.const -0x012345678)) (v128.const i32x4 0 0 0 -0x0_1234_5678))

(assert_return (invoke "f32x4_replace_lane-first" (v128.const f32x4 0.0 0.0 0.0 0.0) (f32.const 53.0)) (v128.const f32x4 53.0 0.0 0.0 0.0))
(assert_return (invoke "f32x4_replace_lane-first" (v128.const i32x4 0 0 0 0 ) (f32.const 53.0)) (v128.const f32x4 53.0 0.0 0.0 0.0))
(assert_return (invoke "f32x4_replace_lane-first" (v128.const f32x4 0.0 0.0 0.0 0.0) (f32.const nan)) (v128.const f32x4 nan 0.0 0.0 0.0))
(assert_return (invoke "f32x4_replace_lane-first" (v128.const f32x4 0.0 0.0 0.0 0.0) (f32.const inf)) (v128.const f32x4 inf 0.0 0.0 0.0))
(assert_return (invoke "f32x4_replace_lane-first" (v128.const f32x4 nan 0.0 0.0 0.0) (f32.const 3.14)) (v128.const f32x4 3.14 0.0 0.0 0.0))
(assert_return (invoke "f32x4_replace_lane-first" (v128.const f32x4 inf 0.0 0.0 0.0) (f32.const 1e38)) (v128.const f32x4 1e38 0.0 0.0 0.0))
(assert_return (invoke "f32x4_replace_lane-first" (v128.const f32x4 inf 0.0 0.0 0.0) (f32.const 0x1.fffffep127)) (v128.const f32x4 0x1.fffffep127 0.0 0.0 0.0))
(assert_return (invoke "f32x4_replace_lane-first" (v128.const f32x4 inf 0.0 0.0 0.0) (f32.const 0x1p127)) (v128.const f32x4 0x1p127 0.0 0.0 0.0))
(assert_return (invoke "f32x4_replace_lane-first" (v128.const f32x4 0.0 0.0 0.0 0.0) (f32.const 0123456789)) (v128.const f32x4 0123456789 0.0 0.0 0.0))
(assert_return (invoke "f32x4_replace_lane-first" (v128.const f32x4 0.0 0.0 0.0 0.0) (f32.const 0123456789.)) (v128.const f32x4 0123456789. 0.0 0.0 0.0))
(assert_return (invoke "f32x4_replace_lane-first" (v128.const f32x4 0.0 0.0 0.0 0.0) (f32.const 0x0123456789ABCDEF)) (v128.const f32x4 0x0123456789ABCDEF 0.0 0.0 0.0))
(assert_return (invoke "f32x4_replace_lane-first" (v128.const f32x4 0.0 0.0 0.0 0.0) (f32.const 0x0123456789ABCDEF.)) (v128.const f32x4 0x0123456789ABCDEF. 0.0 0.0 0.0))
(assert_return (invoke "f32x4_replace_lane-last" (v128.const f32x4 0.0 0.0 0.0 0.0) (f32.const -53.0)) (v128.const f32x4 0.0 0.0 0.0 -53.0))
(assert_return (invoke "f32x4_replace_lane-last" (v128.const i32x4 0 0 0 0) (f32.const -53.0)) (v128.const f32x4 0.0 0.0 0.0 -53.0))
(assert_return (invoke "f32x4_replace_lane-last" (v128.const f32x4 0.0 0.0 0.0 0.0) (f32.const nan)) (v128.const f32x4 0.0 0.0 0.0 nan))
(assert_return (invoke "f32x4_replace_lane-last" (v128.const f32x4 0.0 0.0 0.0 0.0) (f32.const -inf)) (v128.const f32x4 0.0 0.0 0.0 -inf))
(assert_return (invoke "f32x4_replace_lane-last" (v128.const f32x4 0.0 0.0 0.0 nan) (f32.const 3.14)) (v128.const f32x4 0.0 0.0 0.0 3.14))
(assert_return (invoke "f32x4_replace_lane-last" (v128.const f32x4 0.0 0.0 0.0 -inf) (f32.const -1e38)) (v128.const f32x4 0.0 0.0 0.0 -1e38))
(assert_return (invoke "f32x4_replace_lane-last" (v128.const f32x4 0.0 0.0 0.0 -inf) (f32.const -0x1.fffffep127)) (v128.const f32x4 0.0 0.0 0.0 -0x1.fffffep127))
(assert_return (invoke "f32x4_replace_lane-last" (v128.const f32x4 0.0 0.0 0.0 -inf) (f32.const -0x1p127)) (v128.const f32x4 0.0 0.0 0.0 -0x1p127))
(assert_return (invoke "f32x4_replace_lane-last" (v128.const f32x4 0.0 0.0 0.0 0.0) (f32.const 0123456789e019)) (v128.const f32x4 0.0 0.0 0.0 0123456789e019))
(assert_return (invoke "f32x4_replace_lane-last" (v128.const f32x4 0.0 0.0 0.0 0.0) (f32.const 0123456789.e+019)) (v128.const f32x4 0.0 0.0 0.0 0123456789.e+019))
(assert_return (invoke "f32x4_replace_lane-last" (v128.const f32x4 0.0 0.0 0.0 0.0) (f32.const 0x0123456789ABCDEFp019)) (v128.const f32x4 0.0 0.0 0.0 0x0123456789ABCDEFp019))
(assert_return (invoke "f32x4_replace_lane-last" (v128.const f32x4 0.0 0.0 0.0 0.0) (f32.const 0x0123456789ABCDEF.p-019)) (v128.const f32x4 0.0 0.0 0.0 0x0123456789ABCDEF.p-019))

(assert_return (invoke "i64x2_replace_lane-first" (v128.const i64x2 0 0) (i64.const 9223372036854775807)) (v128.const i64x2 9223372036854775807 0))
(assert_return (invoke "i64x2_replace_lane-first" (v128.const i64x2 0 0) (i64.const 18446744073709551615)) (v128.const i64x2 -1 0))
(assert_return (invoke "i64x2_replace_lane-first" (v128.const i64x2 0 0) (i64.const 01234567890123456789)) (v128.const i64x2 01_234_567_890_123_456_789 0))
(assert_return (invoke "i64x2_replace_lane-first" (v128.const i64x2 0 0) (i64.const 0x01234567890abcdef)) (v128.const i64x2 0x0_1234_5678_90AB_cdef 0))
(assert_return (invoke "i64x2_replace_lane-last" (v128.const i64x2 0 0) (i64.const 9223372036854775808)) (v128.const i64x2 0 9223372036854775808))
(assert_return (invoke "i64x2_replace_lane-last" (v128.const i64x2 0 0) (i64.const 9223372036854775808)) (v128.const i64x2 0 -9223372036854775808))
(assert_return (invoke "i64x2_replace_lane-last" (v128.const i64x2 0 0) (i64.const 01234567890123456789)) (v128.const i64x2 0 01_234_567_890_123_456_789))
(assert_return (invoke "i64x2_replace_lane-last" (v128.const i64x2 0 0) (i64.const 0x01234567890abcdef)) (v128.const i64x2 0 0x0_1234_5678_90AB_cdef))

(assert_return (invoke "f64x2_replace_lane-first" (v128.const f64x2 1.0 1.0) (f64.const 0x0p+0)) (v128.const f64x2 0.0 1.0))
(assert_return (invoke "f64x2_replace_lane-first" (v128.const f64x2 -1.0 -1.0) (f64.const -0x0p-0)) (v128.const f64x2 -0.0 -1.0))
(assert_return (invoke "f64x2_replace_lane-first" (v128.const f64x2 0.0 0.0) (f64.const 1.25)) (v128.const f64x2 1.25 0.0))
(assert_return (invoke "f64x2_replace_lane-first" (v128.const f64x2 0.0 0.0) (f64.const -1.25)) (v128.const f64x2 -1.25 0.0))
(assert_return (invoke "f64x2_replace_lane-first" (v128.const f64x2 -nan 0.0) (f64.const -1.7976931348623157e+308)) (v128.const f64x2 -1.7976931348623157e+308 0.0))
(assert_return (invoke "f64x2_replace_lane-first" (v128.const f64x2 nan 0.0) (f64.const 1.7976931348623157e+308)) (v128.const f64x2 1.7976931348623157e+308 0.0))
(assert_return (invoke "f64x2_replace_lane-first" (v128.const f64x2 -inf 0.0) (f64.const -0x1.fffffffffffffp-1023)) (v128.const f64x2 -0x1.fffffffffffffp-1023 0.0))
(assert_return (invoke "f64x2_replace_lane-first" (v128.const f64x2 inf 0.0) (f64.const 0x1.fffffffffffffp-1023)) (v128.const f64x2 0x1.fffffffffffffp-1023 0.0))
(assert_return (invoke "f64x2_replace_lane-first" (v128.const f64x2 0.0 0.0) (f64.const -nan)) (v128.const f64x2 -nan 0.0))
(assert_return (invoke "f64x2_replace_lane-first" (v128.const f64x2 0.0 0.0) (f64.const nan)) (v128.const f64x2 nan 0.0))
(assert_return (invoke "f64x2_replace_lane-first" (v128.const f64x2 0.0 0.0) (f64.const -inf)) (v128.const f64x2 -inf 0.0))
(assert_return (invoke "f64x2_replace_lane-first" (v128.const f64x2 0.0 0.0) (f64.const inf)) (v128.const f64x2 inf 0.0))
(assert_return (invoke "f64x2_replace_lane-first" (v128.const f64x2 0.0 0.0) (f64.const 0123456789)) (v128.const f64x2 0123456789 0.0))
(assert_return (invoke "f64x2_replace_lane-first" (v128.const f64x2 0.0 0.0) (f64.const 0123456789.)) (v128.const f64x2 0123456789. 0.0))
(assert_return (invoke "f64x2_replace_lane-first" (v128.const f64x2 0.0 0.0) (f64.const 0x0123456789ABCDEFabcdef)) (v128.const f64x2 0x0123456789ABCDEFabcdef 0.0))
(assert_return (invoke "f64x2_replace_lane-first" (v128.const f64x2 0.0 0.0) (f64.const 0x0123456789ABCDEFabcdef.)) (v128.const f64x2 0x0123456789ABCDEFabcdef. 0.0))
(assert_return (invoke "f64x2_replace_lane-last" (v128.const f64x2 2.0 2.0) (f64.const 0.0)) (v128.const f64x2 2.0 0.0))
(assert_return (invoke "f64x2_replace_lane-last" (v128.const f64x2 -2.0 -2.0) (f64.const -0.0)) (v128.const f64x2 -2.0 -0.0))
(assert_return (invoke "f64x2_replace_lane-last" (v128.const f64x2 0.0 0.0) (f64.const 2.25)) (v128.const f64x2 0.0 2.25))
(assert_return (invoke "f64x2_replace_lane-last" (v128.const f64x2 0.0 0.0) (f64.const -2.25)) (v128.const f64x2 0.0 -2.25))
(assert_return (invoke "f64x2_replace_lane-last" (v128.const f64x2 0.0 -nan) (f64.const -1.7976931348623157e+308)) (v128.const f64x2 0.0 -1.7976931348623157e+308))
(assert_return (invoke "f64x2_replace_lane-last" (v128.const f64x2 0.0 nan) (f64.const 1.7976931348623157e+308)) (v128.const f64x2 0.0 1.7976931348623157e+308))
(assert_return (invoke "f64x2_replace_lane-last" (v128.const f64x2 0.0 -inf) (f64.const -0x1.fffffffffffffp-1023)) (v128.const f64x2 0.0 -0x1.fffffffffffffp-1023))
(assert_return (invoke "f64x2_replace_lane-last" (v128.const f64x2 0.0 inf) (f64.const 0x1.fffffffffffffp-1023)) (v128.const f64x2 0.0 0x1.fffffffffffffp-1023))
(assert_return (invoke "f64x2_replace_lane-last" (v128.const f64x2 0.0 0.0) (f64.const -nan)) (v128.const f64x2 0.0 -nan))
(assert_return (invoke "f64x2_replace_lane-last" (v128.const f64x2 0.0 0.0) (f64.const nan)) (v128.const f64x2 0.0 nan))
(assert_return (invoke "f64x2_replace_lane-last" (v128.const f64x2 0.0 0.0) (f64.const -inf)) (v128.const f64x2 0.0 -inf))
(assert_return (invoke "f64x2_replace_lane-last" (v128.const f64x2 0.0 0.0) (f64.const inf)) (v128.const f64x2 0.0 inf))
(assert_return (invoke "f64x2_replace_lane-last" (v128.const f64x2 0.0 0.0) (f64.const 0123456789e019)) (v128.const f64x2 0.0 0123456789e019))
(assert_return (invoke "f64x2_replace_lane-last" (v128.const f64x2 0.0 0.0) (f64.const 0123456789e+019)) (v128.const f64x2 0.0 0123456789e+019))
(assert_return (invoke "f64x2_replace_lane-last" (v128.const f64x2 0.0 0.0) (f64.const 0123456789.e019)) (v128.const f64x2 0.0 0123456789.e019))
(assert_return (invoke "f64x2_replace_lane-last" (v128.const f64x2 0.0 0.0) (f64.const 0123456789.e-019)) (v128.const f64x2 0.0 0123456789.e-019))

(assert_return (invoke "v8x16_swizzle"
  (v128.const i8x16 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31)
  (v128.const i8x16  0  1  2  3  4  5  6  7  8  9 10 11 12 13 14 15))
  (v128.const i8x16 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31))
(assert_return (invoke "v8x16_swizzle"
  (v128.const i8x16 -16 -15 -14 -13 -12 -11 -10 -9 -8 -7 -6 -5 -4 -3 -2 -1)
  (v128.const i8x16  -8  -7  -6  -5  -4  -3  -2 -1 16 17 18 19 20 21 22 23))
  (v128.const i8x16   0   0   0   0   0   0   0  0  0  0  0  0  0  0  0  0))
(assert_return (invoke "v8x16_swizzle"
  (v128.const i8x16 100 101 102 103 104 105 106 107 108 109 110 111 112 113 114 115)
  (v128.const i8x16  15  14  13  12  11  10   9   8   7   6   5   4   3   2   1   0))
  (v128.const i8x16 115 114 113 112 111 110 109 108 107 106 105 104 103 102 101 100))
(assert_return (invoke "v8x16_swizzle"
  (v128.const i8x16 100 101 102 103 104 105 106 107 108 109 110 111 112 113 114 115)
  (v128.const i8x16  -1   1  -2   2  -3   3  -4   4  -5   5  -6   6  -7   7  -8   8))
  (v128.const i8x16   0 101   0 102   0 103   0 104   0 105   0 106   0 107   0 108))
(assert_return (invoke "v8x16_swizzle"
  (v128.const i8x16 100 101 102 103 104 105 106 107 108 109 110 111 112 113 114 115)
  (v128.const i8x16   9  16  10  17  11  18  12  19  13  20  14  21  15  22  16  23))
  (v128.const i8x16 109   0 110   0 111   0 112   0 113   0 114   0 115   0   0   0))
(assert_return (invoke "v8x16_swizzle"
  (v128.const i8x16 0x64 0x65 0x66 0x67 0x68 0x69 0x6a 0x6b 0x6c 0x6d 0x6e 0x6f 0x70 0x71 0x72 0x73)
  (v128.const i8x16    9   16   10   17  11    18   12   19  13    20   14   21   15   22   16   23))
  (v128.const i8x16 0x6d    0 0x6e    0 0x6f    0 0x70    0 0x71    0 0x72    0 0x73    0    0    0))
(assert_return (invoke "v8x16_swizzle"
  (v128.const i16x8 0x6465 0x6667 0x6869 0x6a6b 0x6c6d 0x6e6f 0x7071 0x7273)
  (v128.const i8x16 0  1  2  3  4  5  6  7  8  9 10 11 12 13 14 15))
  (v128.const i16x8 0x6465 0x6667 0x6869 0x6a6b 0x6c6d 0x6e6f 0x7071 0x7273))
(assert_return (invoke "v8x16_swizzle"
  (v128.const i32x4 0x64656667 0x68696a6b 0x6c6d6e6f 0x70717273)
  (v128.const i8x16 15 14 13 12 11 10 9 8 7 6 5 4 3 2 1 0))
  (v128.const i32x4 0x73727170 0x6f6e6d6c 0x6b6a6968 0x67666564))
(assert_return (invoke "v8x16_swizzle"
  (v128.const f32x4 nan -nan inf -inf)
  (v128.const i8x16 0  1  2  3  4  5  6  7  8  9 10 11 12 13 14 15))
  (v128.const i32x4 0x7fc00000 0xffc00000 0x7f800000 0xff800000))
(assert_return (invoke "v8x16_swizzle"
  (v128.const i32x4 0x67666564 0x6b6a6968 0x6f6e6d5c 0x73727170)
  (v128.const f32x4 0.0 -0.0 inf -inf))
  (v128.const i32x4 0x64646464 0x00646464 0x00006464 0x00006464))

(assert_return (invoke "v8x16_shuffle-1"
  (v128.const i8x16 0 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15)
  (v128.const i8x16 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31))
  (v128.const i8x16 0 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15))
(assert_return (invoke "v8x16_shuffle-2"
  (v128.const i8x16   0   1   2   3   4   5   6  7  8  9 10 11 12 13 14 15)
  (v128.const i8x16 -16 -15 -14 -13 -12 -11 -10 -9 -8 -7 -6 -5 -4 -3 -2 -1))
  (v128.const i8x16 -16 -15 -14 -13 -12 -11 -10 -9 -8 -7 -6 -5 -4 -3 -2 -1))
(assert_return (invoke "v8x16_shuffle-3"
  (v128.const i8x16   0   1   2   3   4   5   6  7  8   9  10  11  12  13  14  15)
  (v128.const i8x16 -16 -15 -14 -13 -12 -11 -10 -9 -8  -7  -6  -5  -4  -3  -2  -1))
  (v128.const i8x16  -1  -2  -3  -4  -5  -6  -7 -8 -9 -10 -11 -12 -13 -14 -15 -16))
(assert_return (invoke "v8x16_shuffle-4"
  (v128.const i8x16   0   1   2   3   4   5   6  7  8  9 10 11 12 13 14 15)
  (v128.const i8x16 -16 -15 -14 -13 -12 -11 -10 -9 -8 -7 -6 -5 -4 -3 -2 -1))
  (v128.const i8x16  15  14  13  12  11  10   9  8  7  6  5  4  3  2  1  0))
(assert_return (invoke "v8x16_shuffle-5"
  (v128.const i8x16   0   1   2   3   4   5   6  7  8  9 10 11 12 13 14 15)
  (v128.const i8x16 -16 -15 -14 -13 -12 -11 -10 -9 -8 -7 -6 -5 -4 -3 -2 -1))
  (v128.const i8x16   0   0   0   0   0   0   0  0  0  0  0  0  0  0  0  0))
(assert_return (invoke "v8x16_shuffle-6"
  (v128.const i8x16   0   1   2   3   4   5   6   7   8   9  10  11  12  13  14  15)
  (v128.const i8x16 -16 -15 -14 -13 -12 -11 -10  -9  -8  -7  -6  -5  -4  -3  -2  -1))
  (v128.const i8x16 -16 -16 -16 -16 -16 -16 -16 -16 -16 -16 -16 -16 -16 -16 -16 -16))
(assert_return (invoke "v8x16_shuffle-7"
  (v128.const i8x16   0   1   2   3   4   5   6   7   8   9  10  11  12  13  14  15)
  (v128.const i8x16 -16 -15 -14 -13 -12 -11 -10  -9  -8  -7  -6  -5  -4  -3  -2  -1))
  (v128.const i8x16   0   0   0   0   0   0   0   0 -16 -16 -16 -16 -16 -16 -16 -16))
(assert_return (invoke "v8x16_shuffle-1"
  (v128.const i8x16 0x64 0x65 0x66 0x67 0x68 0x69 0x6a 0x6b 0x6c 0x6d 0x6e 0x6f 0x70 0x71 0x72 0x73)
  (v128.const i8x16 0xf0 0xf1 0xf2 0xf3 0xf4 0xf5 0xf6 0xf7 0xf8 0xf9 0xfa 0xfb 0xfc 0xfd 0xfe 0xff))
  (v128.const i8x16 0x64 0x65 0x66 0x67 0x68 0x69 0x6a 0x6b 0x6c 0x6d 0x6e 0x6f 0x70 0x71 0x72 0x73))
(assert_return (invoke "v8x16_shuffle-1"
  (v128.const i16x8 0x0100 0x0302 0x0504 0x0706 0x0908 0x0b0a 0x0d0c 0x0f0e)
  (v128.const i8x16 -16 -15 -14 -13 -12 -11 -10  -9  -8  -7  -6  -5  -4  -3  -2  -1))
  (v128.const i16x8 0x0100 0x0302 0x0504 0x0706 0x0908 0x0b0a 0x0d0c 0x0f0e))
(assert_return (invoke "v8x16_shuffle-2"
  (v128.const i8x16 0 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15)
  (v128.const i32x4 0xf3f2f1f0 0xf7f6f5f4 0xfbfaf9f8 0xfffefdfc))
  (v128.const i32x4 0xf3f2f1f0 0xf7f6f5f4 0xfbfaf9f8 0xfffefdfc))
(assert_return (invoke "v8x16_shuffle-1"
  (v128.const i32x4 0x10203 0x4050607 0x8090a0b 0xc0d0e0f)
  (v128.const i8x16 0 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15))
  (v128.const i32x4 0x10203 0x4050607 0x8090a0b 0xc0d0e0f))
(assert_return (invoke "v8x16_shuffle-1"
  (v128.const f32x4 1.0 nan inf -inf)
  (v128.const i8x16 0 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15))
  (v128.const i32x4 0x3f800000 0x7fc00000 0x7f800000 0xff800000))
(assert_return (invoke "v8x16_shuffle-1"
  (v128.const i32x4 0x10203 0x4050607 0x8090a0b 0xc0d0e0f)
  (v128.const f32x4 -0.0 nan inf -inf))
  (v128.const i32x4 0x10203 0x4050607 0x8090a0b 0xc0d0e0f))

;; More literals
(assert_return (invoke "v8x16_swizzle"
  (v128.const i32x4 1_234_567_890 0x1234_5678 01_234_567_890 0x0_1234_5678)
  (v128.const i8x16 0 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15))
  (v128.const i32x4 0x4996_02d2 0x1234_5678 0x4996_02d2 0x1234_5678))
(assert_return (invoke "v8x16_shuffle-1"
  (v128.const i64x2 1_234_567_890_123_456_789_0 0x1234_5678_90AB_cdef)
  (v128.const i64x2 01_234_567_890_123_456_789_0 0x0_1234_5678_90AB_cdef))
  (v128.const i32x4 0xeb1f_0ad2 0xab54_a98c 0x90ab_cdef 0x1234_5678))

;; Syntax errors for negative values

(module
  (type (;0;) (func (param v128 v128) (result v128)))
  (type (;1;) (func (param v128 i32) (result i32)))
  (type (;2;) (func (param v128 f32) (result f32)))
  (type (;3;) (func (param v128 i64) (result i64)))
  (type (;4;) (func (param v128 f64) (result f64)))
  (type (;5;) (func (param v128 i32 v128) (result v128)))
  (type (;6;) (func (param v128 i32 v128 i32) (result v128)))
  (type (;7;) (func (param i64)))
  (type (;8;) (func (param i64 i64)))
  (import "spectest" "finite_wasm_gas" (func (;0;) (type 7)))
  (import "spectest" "finite_wasm_stack" (func (;1;) (type 8)))
  (import "spectest" "finite_wasm_unstack" (func (;2;) (type 8)))
  (func (;3;) (type 0) (param v128 v128) (result v128)
    block (result v128) ;; label = @1
      i64.const 32
      i64.const 2
      call 1
      i64.const 0
      call 0
      i64.const 4
      call 0
      local.get 0
      local.get 1
      i8x16.extract_lane_s 0
      i8x16.replace_lane 0
    end
    i64.const 32
    i64.const 2
    call 2
  )
  (func (;4;) (type 0) (param v128 v128) (result v128)
    block (result v128) ;; label = @1
      i64.const 32
      i64.const 2
      call 1
      i64.const 0
      call 0
      i64.const 4
      call 0
      local.get 0
      local.get 1
      i8x16.extract_lane_u 0
      i8x16.replace_lane 0
    end
    i64.const 32
    i64.const 2
    call 2
  )
  (func (;5;) (type 0) (param v128 v128) (result v128)
    block (result v128) ;; label = @1
      i64.const 32
      i64.const 2
      call 1
      i64.const 0
      call 0
      i64.const 4
      call 0
      local.get 0
      local.get 1
      i16x8.extract_lane_s 0
      i16x8.replace_lane 0
    end
    i64.const 32
    i64.const 2
    call 2
  )
  (func (;6;) (type 0) (param v128 v128) (result v128)
    block (result v128) ;; label = @1
      i64.const 32
      i64.const 2
      call 1
      i64.const 0
      call 0
      i64.const 4
      call 0
      local.get 0
      local.get 1
      i16x8.extract_lane_u 0
      i16x8.replace_lane 0
    end
    i64.const 32
    i64.const 2
    call 2
  )
  (func (;7;) (type 0) (param v128 v128) (result v128)
    block (result v128) ;; label = @1
      i64.const 32
      i64.const 2
      call 1
      i64.const 0
      call 0
      i64.const 4
      call 0
      local.get 0
      local.get 1
      i32x4.extract_lane 0
      i32x4.replace_lane 0
    end
    i64.const 32
    i64.const 2
    call 2
  )
  (func (;8;) (type 0) (param v128 v128) (result v128)
    block (result v128) ;; label = @1
      i64.const 32
      i64.const 2
      call 1
      i64.const 0
      call 0
      i64.const 4
      call 0
      local.get 0
      local.get 1
      i32x4.extract_lane 0
      i32x4.replace_lane 0
    end
    i64.const 32
    i64.const 2
    call 2
  )
  (func (;9;) (type 0) (param v128 v128) (result v128)
    block (result v128) ;; label = @1
      i64.const 32
      i64.const 2
      call 1
      i64.const 0
      call 0
      i64.const 4
      call 0
      local.get 0
      local.get 1
      i64x2.extract_lane 0
      i64x2.replace_lane 0
    end
    i64.const 32
    i64.const 2
    call 2
  )
  (func (;10;) (type 0) (param v128 v128) (result v128)
    block (result v128) ;; label = @1
      i64.const 32
      i64.const 2
      call 1
      i64.const 0
      call 0
      i64.const 4
      call 0
      local.get 0
      local.get 1
      f64x2.extract_lane 0
      f64x2.replace_lane 0
    end
    i64.const 32
    i64.const 2
    call 2
  )
  (func (;11;) (type 1) (param v128 i32) (result i32)
    block (result i32) ;; label = @1
      i64.const 20
      i64.const 2
      call 1
      i64.const 0
      call 0
      i64.const 4
      call 0
      local.get 0
      local.get 1
      i8x16.replace_lane 15
      i8x16.extract_lane_s 15
    end
    i64.const 20
    i64.const 2
    call 2
  )
  (func (;12;) (type 1) (param v128 i32) (result i32)
    block (result i32) ;; label = @1
      i64.const 20
      i64.const 2
      call 1
      i64.const 0
      call 0
      i64.const 4
      call 0
      local.get 0
      local.get 1
      i8x16.replace_lane 15
      i8x16.extract_lane_u 15
    end
    i64.const 20
    i64.const 2
    call 2
  )
  (func (;13;) (type 1) (param v128 i32) (result i32)
    block (result i32) ;; label = @1
      i64.const 20
      i64.const 2
      call 1
      i64.const 0
      call 0
      i64.const 4
      call 0
      local.get 0
      local.get 1
      i16x8.replace_lane 7
      i16x8.extract_lane_s 7
    end
    i64.const 20
    i64.const 2
    call 2
  )
  (func (;14;) (type 1) (param v128 i32) (result i32)
    block (result i32) ;; label = @1
      i64.const 20
      i64.const 2
      call 1
      i64.const 0
      call 0
      i64.const 4
      call 0
      local.get 0
      local.get 1
      i16x8.replace_lane 7
      i16x8.extract_lane_u 7
    end
    i64.const 20
    i64.const 2
    call 2
  )
  (func (;15;) (type 1) (param v128 i32) (result i32)
    block (result i32) ;; label = @1
      i64.const 20
      i64.const 2
      call 1
      i64.const 0
      call 0
      i64.const 4
      call 0
      local.get 0
      local.get 1
      i32x4.replace_lane 3
      i32x4.extract_lane 3
    end
    i64.const 20
    i64.const 2
    call 2
  )
  (func (;16;) (type 2) (param v128 f32) (result f32)
    block (result f32) ;; label = @1
      i64.const 20
      i64.const 2
      call 1
      i64.const 0
      call 0
      i64.const 4
      call 0
      local.get 0
      local.get 1
      f32x4.replace_lane 3
      f32x4.extract_lane 3
    end
    i64.const 20
    i64.const 2
    call 2
  )
  (func (;17;) (type 3) (param v128 i64) (result i64)
    block (result i64) ;; label = @1
      i64.const 24
      i64.const 2
      call 1
      i64.const 0
      call 0
      i64.const 4
      call 0
      local.get 0
      local.get 1
      i64x2.replace_lane 1
      i64x2.extract_lane 1
    end
    i64.const 24
    i64.const 2
    call 2
  )
  (func (;18;) (type 4) (param v128 f64) (result f64)
    block (result f64) ;; label = @1
      i64.const 24
      i64.const 2
      call 1
      i64.const 0
      call 0
      i64.const 4
      call 0
      local.get 0
      local.get 1
      f64x2.replace_lane 1
      f64x2.extract_lane 1
    end
    i64.const 24
    i64.const 2
    call 2
  )
  (func (;19;) (type 5) (param v128 i32 v128) (result v128)
    block (result v128) ;; label = @1
      i64.const 32
      i64.const 3
      call 1
      i64.const 0
      call 0
      i64.const 5
      call 0
      local.get 0
      local.get 1
      i8x16.replace_lane 0
      local.get 2
      i8x16.swizzle
    end
    i64.const 32
    i64.const 3
    call 2
  )
  (func (;20;) (type 6) (param v128 i32 v128 i32) (result v128)
    block (result v128) ;; label = @1
      i64.const 36
      i64.const 4
      call 1
      i64.const 0
      call 0
      i64.const 7
      call 0
      local.get 0
      local.get 1
      i8x16.replace_lane 0
      local.get 2
      local.get 3
      i8x16.replace_lane 15
      i8x16.shuffle 16 1 18 3 20 5 22 7 24 9 26 11 28 13 30 15
    end
    i64.const 36
    i64.const 4
    call 2
  )
  (export "i8x16_extract_lane_s" (func 3))
  (export "i8x16_extract_lane_u" (func 4))
  (export "i16x8_extract_lane_s" (func 5))
  (export "i16x8_extract_lane_u" (func 6))
  (export "i32x4_extract_lane" (func 7))
  (export "f32x4_extract_lane" (func 8))
  (export "i64x2_extract_lane" (func 9))
  (export "f64x2_extract_lane" (func 10))
  (export "i8x16_replace_lane-s" (func 11))
  (export "i8x16_replace_lane-u" (func 12))
  (export "i16x8_replace_lane-s" (func 13))
  (export "i16x8_replace_lane-u" (func 14))
  (export "i32x4_replace_lane" (func 15))
  (export "f32x4_replace_lane" (func 16))
  (export "i64x2_replace_lane" (func 17))
  (export "f64x2_replace_lane" (func 18))
  (export "as-v8x16_swizzle-operand" (func 19))
  (export "as-v8x16_shuffle-operands" (func 20))
)
(assert_return (invoke "i8x16_extract_lane_s" (v128.const i8x16 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0) (v128.const i8x16 -1 -1 -1 -1 -1 -1 -1 -1 -1 -1 -1 -1 -1 -1 -1 -1)) (v128.const i8x16 -1 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0))
(assert_return (invoke "i8x16_extract_lane_u" (v128.const i8x16 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0) (v128.const i8x16 -1 -1 -1 -1 -1 -1 -1 -1 -1 -1 -1 -1 -1 -1 -1 -1)) (v128.const i8x16 255 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0))
(assert_return (invoke "i16x8_extract_lane_s" (v128.const i16x8 0 0 0 0 0 0 0 0) (v128.const i16x8 -1 -1 -1 -1 -1 -1 -1 -1)) (v128.const i16x8 -1 0 0 0 0 0 0 0))
(assert_return (invoke "i16x8_extract_lane_u" (v128.const i16x8 0 0 0 0 0 0 0 0) (v128.const i16x8 -1 -1 -1 -1 -1 -1 -1 -1)) (v128.const i16x8 65535 0 0 0 0 0 0 0))
(assert_return (invoke "i32x4_extract_lane" (v128.const i32x4 0 0 0 0) (v128.const i32x4 0x10000 -1 -1 -1)) (v128.const i32x4 65536 0 0 0))
(assert_return (invoke "f32x4_extract_lane" (v128.const f32x4 0 0 0 0) (v128.const f32x4 1e38 nan nan nan)) (v128.const f32x4 1e38 0 0 0))
(assert_return (invoke "i8x16_replace_lane-s" (v128.const i8x16 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0) (i32.const 255)) (i32.const -1))
(assert_return (invoke "i8x16_replace_lane-u" (v128.const i8x16 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0) (i32.const 255)) (i32.const 255))
(assert_return (invoke "i16x8_replace_lane-s" (v128.const i16x8 0 0 0 0 0 0 0 0) (i32.const 65535)) (i32.const -1))
(assert_return (invoke "i16x8_replace_lane-u" (v128.const i16x8 0 0 0 0 0 0 0 0) (i32.const 65535)) (i32.const 65535))
(assert_return (invoke "i32x4_replace_lane" (v128.const i32x4 0 0 0 0) (i32.const -1)) (i32.const -1))
(assert_return (invoke "f32x4_replace_lane" (v128.const f32x4 0 0 0 0) (f32.const 1.25)) (f32.const 1.25))

(assert_return (invoke "i64x2_extract_lane" (v128.const i64x2 0 0) (v128.const i64x2 0xffffffffffffffff -1)) (v128.const i64x2 0xffffffffffffffff 0))
(assert_return (invoke "f64x2_extract_lane" (v128.const f64x2 0 0) (v128.const f64x2 1e308 nan)) (v128.const f64x2 1e308 0))
(assert_return (invoke "i64x2_replace_lane" (v128.const i64x2 0 0) (i64.const -1)) (i64.const -1))
(assert_return (invoke "f64x2_replace_lane" (v128.const f64x2 0 0) (f64.const 2.5)) (f64.const 2.5))

(assert_return (invoke "as-v8x16_swizzle-operand"
  (v128.const i8x16 0 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15) (i32.const 255)
  (v128.const i8x16 -1 15 14 13 12 11 10 9 8 7 6 5 4 3 2 1))
  (v128.const i8x16 0 15 14 13 12 11 10 9 8 7 6 5 4 3 2 1))
(assert_return (invoke "as-v8x16_shuffle-operands"
  (v128.const i8x16 0 255 0 255 15 255 0 255 255 255 0 255 127 255 0 255) (i32.const 1)
  (v128.const i8x16 0x55 0 0x55 0 0x55 0 0x55 0 0x55 0 0x55 0 0x55 1 0x55 -1) (i32.const 0))
  (v128.const i8x16 0x55 0xff 0x55 0xff 0x55 0xff 0x55 0xff 0x55 0xff 0x55 0xff 0x55 0xff 0x55 0xff))

;; Combination with other SIMD instructions

(module
  (type (;0;) (func (param v128) (result v128)))
  (type (;1;) (func (param v128 i32 v128 i32) (result v128)))
  (type (;2;) (func (param v128 i64 v128 i64) (result v128)))
  (type (;3;) (func (param v128 v128 v128 v128) (result v128)))
  (type (;4;) (func (param v128 i32) (result i32)))
  (type (;5;) (func (param v128 i64) (result i32)))
  (type (;6;) (func (param v128 v128) (result i32)))
  (type (;7;) (func (param i64)))
  (type (;8;) (func (param i64 i64)))
  (import "spectest" "finite_wasm_gas" (func (;0;) (type 7)))
  (import "spectest" "finite_wasm_stack" (func (;1;) (type 8)))
  (import "spectest" "finite_wasm_unstack" (func (;2;) (type 8)))
  (func (;3;) (type 0) (param v128) (result v128)
    block (result v128) ;; label = @1
      i64.const 16
      i64.const 1
      call 1
      i64.const 0
      call 0
      i64.const 3
      call 0
      local.get 0
      i8x16.extract_lane_s 0
      i8x16.splat
    end
    i64.const 16
    i64.const 1
    call 2
  )
  (func (;4;) (type 0) (param v128) (result v128)
    block (result v128) ;; label = @1
      i64.const 16
      i64.const 1
      call 1
      i64.const 0
      call 0
      i64.const 3
      call 0
      local.get 0
      i16x8.extract_lane_u 0
      i16x8.splat
    end
    i64.const 16
    i64.const 1
    call 2
  )
  (func (;5;) (type 0) (param v128) (result v128)
    block (result v128) ;; label = @1
      i64.const 16
      i64.const 1
      call 1
      i64.const 0
      call 0
      i64.const 3
      call 0
      local.get 0
      i32x4.extract_lane 0
      i32x4.splat
    end
    i64.const 16
    i64.const 1
    call 2
  )
  (func (;6;) (type 0) (param v128) (result v128)
    block (result v128) ;; label = @1
      i64.const 16
      i64.const 1
      call 1
      i64.const 0
      call 0
      i64.const 3
      call 0
      local.get 0
      f32x4.extract_lane 0
      f32x4.splat
    end
    i64.const 16
    i64.const 1
    call 2
  )
  (func (;7;) (type 0) (param v128) (result v128)
    block (result v128) ;; label = @1
      i64.const 16
      i64.const 1
      call 1
      i64.const 0
      call 0
      i64.const 3
      call 0
      local.get 0
      i64x2.extract_lane 0
      i64x2.splat
    end
    i64.const 16
    i64.const 1
    call 2
  )
  (func (;8;) (type 0) (param v128) (result v128)
    block (result v128) ;; label = @1
      i64.const 16
      i64.const 1
      call 1
      i64.const 0
      call 0
      i64.const 3
      call 0
      local.get 0
      f64x2.extract_lane 0
      f64x2.splat
    end
    i64.const 16
    i64.const 1
    call 2
  )
  (func (;9;) (type 1) (param v128 i32 v128 i32) (result v128)
    block (result v128) ;; label = @1
      i64.const 36
      i64.const 4
      call 1
      i64.const 0
      call 0
      i64.const 7
      call 0
      local.get 0
      local.get 1
      i8x16.replace_lane 0
      local.get 2
      local.get 3
      i8x16.replace_lane 15
      i8x16.add
    end
    i64.const 36
    i64.const 4
    call 2
  )
  (func (;10;) (type 1) (param v128 i32 v128 i32) (result v128)
    block (result v128) ;; label = @1
      i64.const 36
      i64.const 4
      call 1
      i64.const 0
      call 0
      i64.const 7
      call 0
      local.get 0
      local.get 1
      i16x8.replace_lane 0
      local.get 2
      local.get 3
      i16x8.replace_lane 7
      i16x8.add
    end
    i64.const 36
    i64.const 4
    call 2
  )
  (func (;11;) (type 1) (param v128 i32 v128 i32) (result v128)
    block (result v128) ;; label = @1
      i64.const 36
      i64.const 4
      call 1
      i64.const 0
      call 0
      i64.const 7
      call 0
      local.get 0
      local.get 1
      i32x4.replace_lane 0
      local.get 2
      local.get 3
      i32x4.replace_lane 3
      i32x4.add
    end
    i64.const 36
    i64.const 4
    call 2
  )
  (func (;12;) (type 2) (param v128 i64 v128 i64) (result v128)
    block (result v128) ;; label = @1
      i64.const 40
      i64.const 4
      call 1
      i64.const 0
      call 0
      i64.const 7
      call 0
      local.get 0
      local.get 1
      i64x2.replace_lane 0
      local.get 2
      local.get 3
      i64x2.replace_lane 1
      i64x2.add
    end
    i64.const 40
    i64.const 4
    call 2
  )
  (func (;13;) (type 3) (param v128 v128 v128 v128) (result v128)
    block (result v128) ;; label = @1
      i64.const 48
      i64.const 4
      call 1
      i64.const 0
      call 0
      i64.const 7
      call 0
      local.get 0
      local.get 1
      i8x16.swizzle
      local.get 2
      local.get 3
      i8x16.swizzle
      i8x16.add
    end
    i64.const 48
    i64.const 4
    call 2
  )
  (func (;14;) (type 3) (param v128 v128 v128 v128) (result v128)
    block (result v128) ;; label = @1
      i64.const 48
      i64.const 4
      call 1
      i64.const 0
      call 0
      i64.const 7
      call 0
      local.get 0
      local.get 1
      i8x16.shuffle 0 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15
      local.get 2
      local.get 3
      i8x16.shuffle 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31
      i8x16.sub
    end
    i64.const 48
    i64.const 4
    call 2
  )
  (func (;15;) (type 4) (param v128 i32) (result i32)
    block (result i32) ;; label = @1
      i64.const 20
      i64.const 2
      call 1
      i64.const 0
      call 0
      i64.const 4
      call 0
      local.get 0
      local.get 1
      i8x16.replace_lane 0
      v128.any_true
    end
    i64.const 20
    i64.const 2
    call 2
  )
  (func (;16;) (type 4) (param v128 i32) (result i32)
    block (result i32) ;; label = @1
      i64.const 20
      i64.const 2
      call 1
      i64.const 0
      call 0
      i64.const 4
      call 0
      local.get 0
      local.get 1
      i16x8.replace_lane 0
      v128.any_true
    end
    i64.const 20
    i64.const 2
    call 2
  )
  (func (;17;) (type 4) (param v128 i32) (result i32)
    block (result i32) ;; label = @1
      i64.const 20
      i64.const 2
      call 1
      i64.const 0
      call 0
      i64.const 4
      call 0
      local.get 0
      local.get 1
      i32x4.replace_lane 0
      v128.any_true
    end
    i64.const 20
    i64.const 2
    call 2
  )
  (func (;18;) (type 5) (param v128 i64) (result i32)
    block (result i32) ;; label = @1
      i64.const 24
      i64.const 2
      call 1
      i64.const 0
      call 0
      i64.const 4
      call 0
      local.get 0
      local.get 1
      i64x2.replace_lane 0
      v128.any_true
    end
    i64.const 24
    i64.const 2
    call 2
  )
  (func (;19;) (type 6) (param v128 v128) (result i32)
    block (result i32) ;; label = @1
      i64.const 32
      i64.const 2
      call 1
      i64.const 0
      call 0
      i64.const 4
      call 0
      local.get 0
      local.get 1
      i8x16.swizzle
      i8x16.all_true
    end
    i64.const 32
    i64.const 2
    call 2
  )
  (func (;20;) (type 6) (param v128 v128) (result i32)
    block (result i32) ;; label = @1
      i64.const 32
      i64.const 2
      call 1
      i64.const 0
      call 0
      i64.const 4
      call 0
      local.get 0
      local.get 1
      i8x16.shuffle 0 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15
      v128.any_true
    end
    i64.const 32
    i64.const 2
    call 2
  )
  (export "as-i8x16_splat-operand" (func 3))
  (export "as-i16x8_splat-operand" (func 4))
  (export "as-i32x4_splat-operand" (func 5))
  (export "as-f32x4_splat-operand" (func 6))
  (export "as-i64x2_splat-operand" (func 7))
  (export "as-f64x2_splat-operand" (func 8))
  (export "as-i8x16_add-operands" (func 9))
  (export "as-i16x8_add-operands" (func 10))
  (export "as-i32x4_add-operands" (func 11))
  (export "as-i64x2_add-operands" (func 12))
  (export "swizzle-as-i8x16_add-operands" (func 13))
  (export "shuffle-as-i8x16_sub-operands" (func 14))
  (export "as-i8x16_any_true-operand" (func 15))
  (export "as-i16x8_any_true-operand" (func 16))
  (export "as-i32x4_any_true-operand1" (func 17))
  (export "as-i32x4_any_true-operand2" (func 18))
  (export "swizzle-as-i8x16_all_true-operands" (func 19))
  (export "shuffle-as-i8x16_any_true-operands" (func 20))
)
(assert_return (invoke "as-i8x16_splat-operand" (v128.const i8x16 0xff 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0)) (v128.const i8x16 -1 -1 -1 -1 -1 -1 -1 -1 -1 -1 -1 -1 -1 -1 -1 -1))
(assert_return (invoke "as-i16x8_splat-operand" (v128.const i16x8 -1 -1 -1 -1 0 0 0 0)) (v128.const i16x8 -1 -1 -1 -1 -1 -1 -1 -1))
(assert_return (invoke "as-i32x4_splat-operand" (v128.const i32x4 0x10000 0 0 0)) (v128.const i32x4 65536 65536 65536 65536))
(assert_return (invoke "as-f32x4_splat-operand" (v128.const f32x4 3.14 nan nan nan)) (v128.const f32x4 3.14 3.14 3.14 3.14))
(assert_return (invoke "as-i64x2_splat-operand" (v128.const i64x2 -1 0)) (v128.const i64x2 -1 -1))
(assert_return (invoke "as-f64x2_splat-operand" (v128.const f64x2 inf nan)) (v128.const f64x2 inf inf))
(assert_return (invoke "as-i8x16_add-operands"
  (v128.const i8x16 0xff 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16) (i32.const 1)
  (v128.const i8x16 16 15 14 13 12 11 10 9 8 7 6 5 4 3 2 0xff) (i32.const 1))
  (v128.const i8x16 17 17 17 17 17 17 17 17 17 17 17 17 17 17 17 17))
(assert_return (invoke "as-i16x8_add-operands"
  (v128.const i16x8 -1 4 9 16 25 36 49 64) (i32.const 1)
  (v128.const i16x8 64 49 36 25 16 9 4 -1) (i32.const 1))
  (v128.const i16x8 65 53 45 41 41 45 53 65))
(assert_return (invoke "as-i32x4_add-operands"
  (v128.const i32x4 -1 8 27 64) (i32.const 1) (v128.const i32x4 64 27 8 -1) (i32.const 1)) (v128.const i32x4 65 35 35 65))
(assert_return (invoke "as-i64x2_add-operands"
  (v128.const i64x2 -1 8) (i64.const 1) (v128.const i64x2 64 27) (i64.const 1)) (v128.const i64x2 65 9))

(assert_return (invoke "swizzle-as-i8x16_add-operands"
  (v128.const i8x16 -16 -15 -14 -13 -12 -11 -10 -9 -8 -7 -6 -5 -4 -3 -2 -1)
  (v128.const i8x16 0 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15)
  (v128.const i8x16 0 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15)
  (v128.const i8x16 15 14 13 12 11 10 9 8 7 6 5 4 3 2 1 0))
  (v128.const i8x16 -1 -1 -1 -1 -1 -1 -1 -1 -1 -1 -1 -1 -1 -1 -1 -1))
(assert_return (invoke "shuffle-as-i8x16_sub-operands"
  (v128.const i8x16 0 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15)
  (v128.const i8x16 15 14 13 12 11 10 9 8 7 6 5 4 3 2 1 0)
  (v128.const i8x16 -16 -15 -14 -13 -12 -11 -10 -9 -8 -7 -6 -5 -4 -3 -2 -1)
  (v128.const i8x16 15 14 13 12 11 10 9 8 7 6 5 4 3 2 1 0))
  (v128.const i8x16 -15 -13 -11 -9 -7 -5 -3 -1 1 3 5 7 9 11 13 15))

(assert_return (invoke "as-i8x16_any_true-operand" (v128.const i8x16 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0) (i32.const 1)) (i32.const 1))
(assert_return (invoke "as-i16x8_any_true-operand" (v128.const i16x8 0 0 0 0 0 0 0 0) (i32.const 1)) (i32.const 1))
(assert_return (invoke "as-i32x4_any_true-operand1" (v128.const i32x4 1 0 0 0) (i32.const 0)) (i32.const 0))
(assert_return (invoke "as-i32x4_any_true-operand2" (v128.const i64x2 1 0) (i64.const 0)) (i32.const 0))

(assert_return (invoke "swizzle-as-i8x16_all_true-operands"
  (v128.const i8x16 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16)
  (v128.const i8x16 0 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15)) (i32.const 1))
(assert_return (invoke "swizzle-as-i8x16_all_true-operands"
  (v128.const i8x16 -16 -15 -14 -13 -12 -11 -10 -9 -8 -7 -6 -5 -4 -3 -2 -1)
  (v128.const i8x16 0 1 2 3 4 5 6 7 8 9 10 11 12 13 14 16)) (i32.const 0))
(assert_return (invoke "shuffle-as-i8x16_any_true-operands"
  (v128.const i8x16 -16 -15 -14 -13 -12 -11 -10 -9 -8 -7 -6 -5 -4 -3 -2 -1)
  (v128.const i8x16 0 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15)) (i32.const 1))

;; Load and store

(module
  (type (;0;) (func (param v128 i32) (result v128)))
  (type (;1;) (func (param v128 f32) (result v128)))
  (type (;2;) (func (param v128 i64) (result v128)))
  (type (;3;) (func (param v128 f64) (result v128)))
  (type (;4;) (func (param i64)))
  (type (;5;) (func (param i64 i64)))
  (import "spectest" "finite_wasm_gas" (func (;0;) (type 4)))
  (import "spectest" "finite_wasm_stack" (func (;1;) (type 5)))
  (import "spectest" "finite_wasm_unstack" (func (;2;) (type 5)))
  (func (;3;) (type 0) (param v128 i32) (result v128)
    block (result v128) ;; label = @1
      i64.const 24
      i64.const 2
      call 1
      i64.const 0
      call 0
      i64.const 5
      call 0
      i32.const 0
      local.get 0
      local.get 1
      i8x16.replace_lane 0
      v128.store
      i64.const 2
      call 0
      i32.const 0
      v128.load
    end
    i64.const 24
    i64.const 2
    call 2
  )
  (func (;4;) (type 0) (param v128 i32) (result v128)
    block (result v128) ;; label = @1
      i64.const 24
      i64.const 2
      call 1
      i64.const 0
      call 0
      i64.const 5
      call 0
      i32.const 0
      local.get 0
      local.get 1
      i16x8.replace_lane 0
      v128.store
      i64.const 2
      call 0
      i32.const 0
      v128.load
    end
    i64.const 24
    i64.const 2
    call 2
  )
  (func (;5;) (type 0) (param v128 i32) (result v128)
    block (result v128) ;; label = @1
      i64.const 24
      i64.const 2
      call 1
      i64.const 0
      call 0
      i64.const 5
      call 0
      i32.const 0
      local.get 0
      local.get 1
      i32x4.replace_lane 0
      v128.store
      i64.const 2
      call 0
      i32.const 0
      v128.load
    end
    i64.const 24
    i64.const 2
    call 2
  )
  (func (;6;) (type 1) (param v128 f32) (result v128)
    block (result v128) ;; label = @1
      i64.const 24
      i64.const 2
      call 1
      i64.const 0
      call 0
      i64.const 5
      call 0
      i32.const 0
      local.get 0
      local.get 1
      f32x4.replace_lane 0
      v128.store
      i64.const 2
      call 0
      i32.const 0
      v128.load
    end
    i64.const 24
    i64.const 2
    call 2
  )
  (func (;7;) (type 2) (param v128 i64) (result v128)
    block (result v128) ;; label = @1
      i64.const 28
      i64.const 2
      call 1
      i64.const 0
      call 0
      i64.const 5
      call 0
      i32.const 0
      local.get 0
      local.get 1
      i64x2.replace_lane 0
      v128.store
      i64.const 2
      call 0
      i32.const 0
      v128.load
    end
    i64.const 28
    i64.const 2
    call 2
  )
  (func (;8;) (type 3) (param v128 f64) (result v128)
    block (result v128) ;; label = @1
      i64.const 28
      i64.const 2
      call 1
      i64.const 0
      call 0
      i64.const 5
      call 0
      i32.const 0
      local.get 0
      local.get 1
      f64x2.replace_lane 0
      v128.store
      i64.const 2
      call 0
      i32.const 0
      v128.load
    end
    i64.const 28
    i64.const 2
    call 2
  )
  (memory (;0;) 1)
  (export "as-v128_store-operand-1" (func 3))
  (export "as-v128_store-operand-2" (func 4))
  (export "as-v128_store-operand-3" (func 5))
  (export "as-v128_store-operand-4" (func 6))
  (export "as-v128_store-operand-5" (func 7))
  (export "as-v128_store-operand-6" (func 8))
)
(assert_return (invoke "as-v128_store-operand-1" (v128.const i8x16 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0) (i32.const 1)) (v128.const i8x16 1 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0))
(assert_return (invoke "as-v128_store-operand-2" (v128.const i16x8 0 0 0 0 0 0 0 0) (i32.const 256)) (v128.const i16x8 0x100 0 0 0 0 0 0 0))
(assert_return (invoke "as-v128_store-operand-3" (v128.const i32x4 0 0 0 0) (i32.const 0xffffffff)) (v128.const i32x4 -1 0 0 0))
(assert_return (invoke "as-v128_store-operand-4" (v128.const f32x4 0 0 0 0) (f32.const 3.14)) (v128.const f32x4 3.14 0 0 0))
(assert_return (invoke "as-v128_store-operand-5" (v128.const i64x2 0 0) (i64.const 0xffffffffffffffff)) (v128.const i64x2 -1 0))
(assert_return (invoke "as-v128_store-operand-6" (v128.const f64x2 0 0) (f64.const 3.14)) (v128.const f64x2 3.14 0))

;; As the argument of wasm core ops

(module
  (type (;0;) (func (param v128) (result i32)))
  (type (;1;) (func (param v128 i32) (result v128)))
  (type (;2;) (func (param v128 f32) (result v128)))
  (type (;3;) (func (param v128 v128) (result v128)))
  (type (;4;) (func (param v128) (result i64)))
  (type (;5;) (func (param v128 f64) (result v128)))
  (type (;6;) (func (param i64)))
  (type (;7;) (func (param i64 i64)))
  (import "spectest" "finite_wasm_gas" (func (;0;) (type 6)))
  (import "spectest" "finite_wasm_stack" (func (;1;) (type 7)))
  (import "spectest" "finite_wasm_unstack" (func (;2;) (type 7)))
  (func (;3;) (type 0) (param v128) (result i32)
    block (result i32) ;; label = @1
      i64.const 16
      i64.const 1
      call 1
      i64.const 0
      call 0
      i64.const 3
      call 0
      local.get 0
      i8x16.extract_lane_s 0
      if (result i32) ;; label = @2
        i64.const 1
        call 0
        i32.const 255
      else
        i64.const 1
        call 0
        i32.const 0
      end
    end
    i64.const 16
    i64.const 1
    call 2
  )
  (func (;4;) (type 1) (param v128 i32) (result v128)
    block (result v128) ;; label = @1
      i64.const 20
      i64.const 2
      call 1
      i64.const 0
      call 0
      i64.const 4
      call 0
      local.get 0
      local.get 1
      i16x8.replace_lane 0
      i64.const 20
      i64.const 2
      call 2
      return
    end
    i64.const 20
    i64.const 2
    call 2
  )
  (func (;5;) (type 0) (param v128) (result i32)
    (local i32)
    block (result i32) ;; label = @1
      i64.const 16
      i64.const 2
      call 1
      i64.const 0
      call 0
      i64.const 5
      call 0
      local.get 0
      i32x4.extract_lane 0
      local.set 1
      local.get 1
      i64.const 16
      i64.const 2
      call 2
      return
    end
    i64.const 16
    i64.const 2
    call 2
  )
  (func (;6;) (type 2) (param v128 f32) (result v128)
    block (result v128) ;; label = @1
      i64.const 20
      i64.const 2
      call 1
      i64.const 0
      call 0
      i64.const 6
      call 0
      local.get 0
      local.get 1
      f32x4.replace_lane 0
      global.set $g
      global.get $g
      i64.const 20
      i64.const 2
      call 2
      return
    end
    i64.const 20
    i64.const 2
    call 2
  )
  (func (;7;) (type 3) (param v128 v128) (result v128)
    block (result v128) ;; label = @1
      i64.const 32
      i64.const 2
      call 1
      i64.const 0
      call 0
      i64.const 4
      call 0
      local.get 0
      local.get 1
      i8x16.swizzle
      i64.const 32
      i64.const 2
      call 2
      return
    end
    i64.const 32
    i64.const 2
    call 2
  )
  (func (;8;) (type 3) (param v128 v128) (result v128)
    block (result v128) ;; label = @1
      i64.const 32
      i64.const 2
      call 1
      i64.const 0
      call 0
      i64.const 6
      call 0
      local.get 0
      local.get 1
      i8x16.shuffle 0 1 2 3 4 5 6 7 24 25 26 27 28 29 30 31
      global.set $h
      global.get $h
      i64.const 32
      i64.const 2
      call 2
      return
    end
    i64.const 32
    i64.const 2
    call 2
  )
  (func (;9;) (type 4) (param v128) (result i64)
    (local i64)
    block (result i64) ;; label = @1
      i64.const 16
      i64.const 2
      call 1
      i64.const 0
      call 0
      i64.const 5
      call 0
      local.get 0
      i64x2.extract_lane 0
      local.set 1
      local.get 1
      i64.const 16
      i64.const 2
      call 2
      return
    end
    i64.const 16
    i64.const 2
    call 2
  )
  (func (;10;) (type 5) (param v128 f64) (result v128)
    block (result v128) ;; label = @1
      i64.const 24
      i64.const 2
      call 1
      i64.const 0
      call 0
      i64.const 6
      call 0
      local.get 0
      local.get 1
      f64x2.replace_lane 0
      global.set $g
      global.get $g
      i64.const 24
      i64.const 2
      call 2
      return
    end
    i64.const 24
    i64.const 2
    call 2
  )
  (global $g (;0;) (mut v128) v128.const i32x4 0x00000000 0x00000000 0x00000000 0x00000000)
  (global $h (;1;) (mut v128) v128.const i32x4 0x00000000 0x00000000 0x00000000 0x00000000)
  (export "as-if-condition-value" (func 3))
  (export "as-return-value-1" (func 4))
  (export "as-local_set-value" (func 5))
  (export "as-global_set-value-1" (func 6))
  (export "as-return-value-2" (func 7))
  (export "as-global_set-value-2" (func 8))
  (export "as-local_set-value-1" (func 9))
  (export "as-global_set-value-3" (func 10))
)
(assert_return (invoke "as-if-condition-value" (v128.const i8x16 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0)) (i32.const 0))
(assert_return (invoke "as-return-value-1" (v128.const i16x8 0 0 0 0 0 0 0 0) (i32.const 1)) (v128.const i16x8 1 0 0 0 0 0 0 0))
(assert_return (invoke "as-local_set-value" (v128.const i32x4 -1 -1 -1 -1)) (i32.const -1))
(assert_return (invoke "as-global_set-value-1" (v128.const f32x4 0 0 0 0)(f32.const 3.14)) (v128.const f32x4 3.14 0 0 0))

(assert_return (invoke "as-return-value-2"
  (v128.const i8x16 -16 -15 -14 -13 -12 -11 -10 -9 -8 -7 -6 -5 -4 -3 -2 -1)
  (v128.const i8x16 15 14 13 12 11 10 9 8 7 6 5 4 3 2 1 0))
  (v128.const i8x16 -1 -2 -3 -4 -5 -6 -7 -8 -9 -10 -11 -12 -13 -14 -15 -16))
(assert_return (invoke "as-global_set-value-2"
  (v128.const i8x16 -16 -15 -14 -13 -12 -11 -10 -9 -8 -7 -6 -5 -4 -3 -2 -1)
  (v128.const i8x16 16 15 14 13 12 11 10 9 8 7 6 5 4 3 2 1))
  (v128.const i8x16 -16 -15 -14 -13 -12 -11 -10 -9 8 7 6 5 4 3 2 1))

(assert_return (invoke "as-local_set-value-1" (v128.const i64x2 -1 -1)) (i64.const -1))
(assert_return (invoke "as-global_set-value-3" (v128.const f64x2 0 0)(f64.const 3.14)) (v128.const f64x2 3.14 0))

;; Non-nat lane index

(module
  (type (;0;) (func (result i32)))
  (type (;1;) (func (param i64)))
  (type (;2;) (func (param i64 i64)))
  (import "spectest" "finite_wasm_gas" (func (;0;) (type 1)))
  (import "spectest" "finite_wasm_stack" (func (;1;) (type 2)))
  (import "spectest" "finite_wasm_unstack" (func (;2;) (type 2)))
  (func (;3;) (type 0) (result i32)
    block (result i32) ;; label = @1
      i64.const 16
      i64.const 0
      call 1
      i64.const 0
      call 0
      i64.const 2
      call 0
      v128.const i32x4 0x00000000 0x00000000 0x00000000 0x00000000
      i8x16.extract_lane_s 15
    end
    i64.const 16
    i64.const 0
    call 2
  )
)
(module
  (type (;0;) (func (result i32)))
  (type (;1;) (func (param i64)))
  (type (;2;) (func (param i64 i64)))
  (import "spectest" "finite_wasm_gas" (func (;0;) (type 1)))
  (import "spectest" "finite_wasm_stack" (func (;1;) (type 2)))
  (import "spectest" "finite_wasm_unstack" (func (;2;) (type 2)))
  (func (;3;) (type 0) (result i32)
    block (result i32) ;; label = @1
      i64.const 16
      i64.const 0
      call 1
      i64.const 0
      call 0
      i64.const 2
      call 0
      v128.const i32x4 0x00000000 0x00000000 0x00000000 0x00000000
      i16x8.extract_lane_s 7
    end
    i64.const 16
    i64.const 0
    call 2
  )
)
(module
  (type (;0;) (func (result i32)))
  (type (;1;) (func (param i64)))
  (type (;2;) (func (param i64 i64)))
  (import "spectest" "finite_wasm_gas" (func (;0;) (type 1)))
  (import "spectest" "finite_wasm_stack" (func (;1;) (type 2)))
  (import "spectest" "finite_wasm_unstack" (func (;2;) (type 2)))
  (func (;3;) (type 0) (result i32)
    block (result i32) ;; label = @1
      i64.const 16
      i64.const 0
      call 1
      i64.const 0
      call 0
      i64.const 2
      call 0
      v128.const i32x4 0x00000000 0x00000000 0x00000000 0x00000000
      i16x8.extract_lane_u 7
    end
    i64.const 16
    i64.const 0
    call 2
  )
)
(module
  (type (;0;) (func (result i32)))
  (type (;1;) (func (param i64)))
  (type (;2;) (func (param i64 i64)))
  (import "spectest" "finite_wasm_gas" (func (;0;) (type 1)))
  (import "spectest" "finite_wasm_stack" (func (;1;) (type 2)))
  (import "spectest" "finite_wasm_unstack" (func (;2;) (type 2)))
  (func (;3;) (type 0) (result i32)
    block (result i32) ;; label = @1
      i64.const 16
      i64.const 0
      call 1
      i64.const 0
      call 0
      i64.const 2
      call 0
      v128.const i32x4 0x00000000 0x00000000 0x00000000 0x00000000
      i32x4.extract_lane 3
    end
    i64.const 16
    i64.const 0
    call 2
  )
)
(module
  (type (;0;) (func (result f64)))
  (type (;1;) (func (param i64)))
  (type (;2;) (func (param i64 i64)))
  (import "spectest" "finite_wasm_gas" (func (;0;) (type 1)))
  (import "spectest" "finite_wasm_stack" (func (;1;) (type 2)))
  (import "spectest" "finite_wasm_unstack" (func (;2;) (type 2)))
  (func (;3;) (type 0) (result f64)
    block (result f64) ;; label = @1
      i64.const 16
      i64.const 0
      call 1
      i64.const 0
      call 0
      i64.const 2
      call 0
      v128.const i32x4 0x00000000 0x00000000 0x00000000 0x00000000
      f64x2.extract_lane 1
    end
    i64.const 16
    i64.const 0
    call 2
  )
)
(module
  (type (;0;) (func (result v128)))
  (type (;1;) (func (param i64)))
  (type (;2;) (func (param i64 i64)))
  (import "spectest" "finite_wasm_gas" (func (;0;) (type 1)))
  (import "spectest" "finite_wasm_stack" (func (;1;) (type 2)))
  (import "spectest" "finite_wasm_unstack" (func (;2;) (type 2)))
  (func (;3;) (type 0) (result v128)
    block (result v128) ;; label = @1
      i64.const 20
      i64.const 0
      call 1
      i64.const 0
      call 0
      i64.const 3
      call 0
      v128.const i32x4 0x00000000 0x00000000 0x00000000 0x00000000
      f32.const 0x1p+0 (;=1;)
      f32x4.replace_lane 3
    end
    i64.const 20
    i64.const 0
    call 2
  )
)
(module
  (type (;0;) (func (result v128)))
  (type (;1;) (func (param i64)))
  (type (;2;) (func (param i64 i64)))
  (import "spectest" "finite_wasm_gas" (func (;0;) (type 1)))
  (import "spectest" "finite_wasm_stack" (func (;1;) (type 2)))
  (import "spectest" "finite_wasm_unstack" (func (;2;) (type 2)))
  (func (;3;) (type 0) (result v128)
    block (result v128) ;; label = @1
      i64.const 24
      i64.const 0
      call 1
      i64.const 0
      call 0
      i64.const 3
      call 0
      v128.const i32x4 0x00000000 0x00000000 0x00000000 0x00000000
      i64.const 1
      i64x2.replace_lane 1
    end
    i64.const 24
    i64.const 0
    call 2
  )
)
